<!DOCTYPE html>
<html>
<head>
	<title>South Luangwa carcass</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src='https://api.mapbox.com/mapbox-gl-js/v0.42.0/mapbox-gl.js'></script>
	<link rel='stylesheet'href='https://api.mapbox.com/mapbox-gl-js/v0.42.0/mapbox-gl.css' rel='stylesheet'/>
	<!-- <script src='https://api.mapbox.com/mapbox.js/plugins/turf/v2.0.2/turf.min.js'></script> not sure TurfJS is compatiable w/ mapbox-gl-js -->
	<!-- <script src="geojson/BushcampCo-sites.geojson" type="text/javascript"></script> -->
	<!-- <script src="geojson/slnp_ele_carcasses.geojson" type="text/javascript"></script> -->
	<style>
		body { margin:0; padding:5; }
		#map {
			position: absolute;
			top: 0;
			bottom: 0;
			width: 100%;
		}
		h1 {
		  font-size: 20px;
		  line-height: 30px;
		}

		h2 {
  	font-size: 14px;
  	line-height: 20px;
  	margin-bottom: 10px;
		}

		a {
		  text-decoration: none;
		  color: #2dc4b2;
		}

		#console {
			position: absolute;
			width: 240px;
			margin: 10px;
			padding: 10px 20px;
			background-color: white;
		}

		.session {
		  margin-bottom: 20px;
		}

		.row {
		  height: 12px;
		  width: 60px;
		}

		.colors {
		  background: linear-gradient(to right, #fee5d9, #fcae91, #fb6a4a, #de2d26, #a50f15);
		  margin-bottom: 5px;
		}
	</style>
</head>
<body>
  <div id="map"</div>
<!-- adapted from https://bl.ocks.org/danswick/83a8ddff7fb9193176a975a02a896792 -->
	<!-- <div id='fitBounds' onclick='fit()'>fit to points</div> -->
	<div id='console'
		<h1>South Luangwa National Park</h1>
		<p>Reported Poached Carcasses</p>
				<div class='session'>
				  <h2>Carcasses</h2>
				  <div class='row colors'>
				  </div>
				  <!-- <div class='row labels'>
				    <! <div class='label'>0</div>
				    <div class='label'>1</div>
				    <div class='label'>2</div>
				    <div class='label'>3</div>
				    <div class='label'>4</div>
				    <div class='label'>5+</div> -->
				  </div>
		</div>
	</div>

	<script>
		mapboxgl.accessToken = 'pk.eyJ1IjoidmpvZWxtIiwiYSI6ImNpZ3RzNXdmeDA4cm90N2tuZzhsd3duZm0ifQ.YcHUz9BmCk2oVOsL48VgVQ'
		var map = new mapboxgl.Map({
				container: 'map', // container id
			  style: 'mapbox://styles/vjoelm/cityu41cn00dm2inzy1hg67vt',
				interactive: true,
				center: [31.8149, -13.3806], // map center
				zoom: 8 // starting zoom;
		});

	 map.on('load', function(){
		 // Add a geojson point source
		 // Heatmap layers also work with a vector tile source
		 map.addSource('carcass', {
			 type: "geojson",
			 data: "./assets/slnp_ele_carcasses.geojson"
		 });
		 // add heatmap layer here
		 map.addLayer({
			 id: 'carcass-heat',
			 type: 'heatmap',
			 source: 'carcass',
			 maxzoom: 15,
			 paint: {
			 	// increase heatmap color weight by Z-level
				// heatmap-intensity is multiplier on top of heatmap-weight
				 'heatmap-intensity': {
					 stops: [
						 [5, 1],
						 [10, 3]
					 ]
				 },
				 // heatmap-color
				 'heatmap-color': [
					 'interpolate',
					 ['linear'],
					 ['heatmap-density'],
					 0, 'rgba(254,229,217,0)',
					 0.25, 'rgb(252,174,145)',
					 0.5, 'rgb(251,106,74)',
					 0.75, 'rgb(222,45,38)',
					 1, 'rgb(165,15,21)'
				 ],
         // adjust heatmap radius by Z-level
				 'heatmap-radius': {
					 stops: [
						 [5, 5],
						 [10, 50]
						 ]
				 },
				 //Transition from heatmap to circle layer by zoom level
				 "heatmap-opacity": {
						 "default": 1,
						 "stops": [
								 [6, 1],
								 [12, 0.5]
						 ]
				 },
		 }
	// }, 'waterway-label'); // add layer above vis
		});

		 // map.addSource('test_areas', {
			//  type: "geojson",
			//  data: "./assets/slnp_test_areas.geojson"
		 // });
		 // // add heatmap layer here
		 // map.addLayer({
			//  id: 'test_areas',
			//  type: 'polygon',
			//  source: 'test_areas',
			//  maxzoom: 15,
			//  paint: {
			// 	 'heatmap-radius': {
			// 		 stops: [
			// 			 [6, 25],
			// 			 [12, 50]
			// 			 ]
			// }
	 // }}, 'waterway-label');


});
	</script>
</body>
</html>
