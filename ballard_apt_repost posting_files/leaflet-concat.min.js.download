!function(a,b){"$:nomunge";var c,d=a.jQuery||a.Cowboy||(a.Cowboy={});d.throttle=c=function(a,c,e,f){function g(){function d(){i=+new Date,e.apply(j,l)}function g(){h=b}var j=this,k=+new Date-i,l=arguments;f&&!h&&d(),h&&clearTimeout(h),f===b&&k>a?d():c!==!0&&(h=setTimeout(f?g:d,f===b?a-k:a))}var h,i=0;return"boolean"!=typeof c&&(f=e,e=c,c=b),d.guid&&(g.guid=e.guid=e.guid||d.guid++),g},d.debounce=function(a,d,e){return e===b?c(a,d,!1):c(a,e,d!==!1)}}(this),function(a,b){var c={version:"1.0.3+ed36a04"};"object"==typeof module&&"object"==typeof module.exports?module.exports=c:"function"==typeof define&&define.amd&&define(c),void 0!==a&&function(){var b=a.L;c.noConflict=function(){return a.L=b,this},a.L=c}(),c.Util={extend:function(a){var b,c,d,e;for(c=1,d=arguments.length;c<d;c++){e=arguments[c];for(b in e)a[b]=e[b]}return a},create:Object.create||function(){function a(){}return function(b){return a.prototype=b,new a}}(),bind:function(a,b){var c=Array.prototype.slice;if(a.bind)return a.bind.apply(a,c.call(arguments,1));var d=c.call(arguments,2);return function(){return a.apply(b,d.length?d.concat(c.call(arguments)):arguments)}},stamp:function(a){return a._leaflet_id=a._leaflet_id||++c.Util.lastId,a._leaflet_id},lastId:0,throttle:function(a,b,c){var d,e,f,g;return g=function(){d=!1,e&&(f.apply(c,e),e=!1)},f=function(){d?e=arguments:(a.apply(c,arguments),setTimeout(g,b),d=!0)}},wrapNum:function(a,b,c){var d=b[1],e=b[0],f=d-e;return a===d&&c?a:((a-e)%f+f)%f+e},falseFn:function(){return!1},formatNum:function(a,b){var c=Math.pow(10,b||5);return Math.round(a*c)/c},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return c.Util.trim(a).split(/\s+/)},setOptions:function(a,b){a.hasOwnProperty("options")||(a.options=a.options?c.Util.create(a.options):{});for(var d in b)a.options[d]=b[d];return a.options},getParamString:function(a,b,c){var d=[];for(var e in a)d.push(encodeURIComponent(c?e.toUpperCase():e)+"="+encodeURIComponent(a[e]));return(b&&b.indexOf("?")!==-1?"&":"?")+d.join("&")},template:function(a,b){return a.replace(c.Util.templateRe,function(a,c){var d=b[c];if(void 0===d)throw new Error("No value provided for variable "+a);return"function"==typeof d&&(d=d(b)),d})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},indexOf:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function b(b){return a["webkit"+b]||a["moz"+b]||a["ms"+b]}function d(b){var c=+new Date,d=Math.max(0,16-(c-e));return e=c+d,a.setTimeout(b,d)}var e=0,f=a.requestAnimationFrame||b("RequestAnimationFrame")||d,g=a.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(b){a.clearTimeout(b)};c.Util.requestAnimFrame=function(b,e,g){if(!g||f!==d)return f.call(a,c.bind(b,e));b.call(e)},c.Util.cancelAnimFrame=function(b){b&&g.call(a,b)}}(),c.extend=c.Util.extend,c.bind=c.Util.bind,c.stamp=c.Util.stamp,c.setOptions=c.Util.setOptions,c.Class=function(){},c.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=b.__super__=this.prototype,e=c.Util.create(d);e.constructor=b,b.prototype=e;for(var f in this)this.hasOwnProperty(f)&&"prototype"!==f&&(b[f]=this[f]);return a.statics&&(c.extend(b,a.statics),delete a.statics),a.includes&&(c.Util.extend.apply(null,[e].concat(a.includes)),delete a.includes),e.options&&(a.options=c.Util.extend(c.Util.create(e.options),a.options)),c.extend(e,a),e._initHooks=[],e.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var a=0,b=e._initHooks.length;a<b;a++)e._initHooks[a].call(this)}},b},c.Class.include=function(a){return c.extend(this.prototype,a),this},c.Class.mergeOptions=function(a){return c.extend(this.prototype.options,a),this},c.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1),c="function"==typeof a?a:function(){this[a].apply(this,b)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this},c.Evented=c.Class.extend({on:function(a,b,d){if("object"==typeof a)for(var e in a)this._on(e,a[e],b);else{a=c.Util.splitWords(a);for(var f=0,g=a.length;f<g;f++)this._on(a[f],b,d)}return this},off:function(a,b,d){if(a)if("object"==typeof a)for(var e in a)this._off(e,a[e],b);else{a=c.Util.splitWords(a);for(var f=0,g=a.length;f<g;f++)this._off(a[f],b,d)}else delete this._events;return this},_on:function(a,b,c){this._events=this._events||{};var d=this._events[a];d||(d=[],this._events[a]=d),c===this&&(c=void 0);for(var e={fn:b,ctx:c},f=d,g=0,h=f.length;g<h;g++)if(f[g].fn===b&&f[g].ctx===c)return;f.push(e)},_off:function(a,b,d){var e,f,g;if(this._events&&(e=this._events[a])){if(!b){for(f=0,g=e.length;f<g;f++)e[f].fn=c.Util.falseFn;return void delete this._events[a]}if(d===this&&(d=void 0),e)for(f=0,g=e.length;f<g;f++){var h=e[f];if(h.ctx===d&&h.fn===b)return h.fn=c.Util.falseFn,this._firingCount&&(this._events[a]=e=e.slice()),void e.splice(f,1)}}},fire:function(a,b,d){if(!this.listens(a,d))return this;var e=c.Util.extend({},b,{type:a,target:this});if(this._events){var f=this._events[a];if(f){this._firingCount=this._firingCount+1||1;for(var g=0,h=f.length;g<h;g++){var i=f[g];i.fn.call(i.ctx||this,e)}this._firingCount--}}return d&&this._propagateEvent(e),this},listens:function(a,b){var c=this._events&&this._events[a];if(c&&c.length)return!0;if(b)for(var d in this._eventParents)if(this._eventParents[d].listens(a,b))return!0;return!1},once:function(a,b,d){if("object"==typeof a){for(var e in a)this.once(e,a[e],b);return this}var f=c.bind(function(){this.off(a,b,d).off(a,f,d)},this);return this.on(a,b,d).on(a,f,d)},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[c.stamp(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[c.stamp(a)],this},_propagateEvent:function(a){for(var b in this._eventParents)this._eventParents[b].fire(a.type,c.extend({layer:a.target},a),!0)}});var d=c.Evented.prototype;d.addEventListener=d.on,d.removeEventListener=d.clearAllEventListeners=d.off,d.addOneTimeEventListener=d.once,d.fireEvent=d.fire,d.hasEventListeners=d.listens,c.Mixin={Events:d},function(){var d=navigator.userAgent.toLowerCase(),e=b.documentElement,f="ActiveXObject"in a,g=d.indexOf("webkit")!==-1,h=d.indexOf("phantom")!==-1,i=d.search("android [23]")!==-1,j=d.indexOf("chrome")!==-1,k=d.indexOf("gecko")!==-1&&!g&&!a.opera&&!f,l=0===navigator.platform.indexOf("Win"),m="undefined"!=typeof orientation||d.indexOf("mobile")!==-1,n=!a.PointerEvent&&a.MSPointerEvent,o=a.PointerEvent||n,p=f&&"transition"in e.style,q="WebKitCSSMatrix"in a&&"m11"in new a.WebKitCSSMatrix&&!i,r="MozPerspective"in e.style,s="OTransition"in e.style,t=!a.L_NO_TOUCH&&(o||"ontouchstart"in a||a.DocumentTouch&&b instanceof a.DocumentTouch);c.Browser={ie:f,ielt9:f&&!b.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in b),webkit:g,gecko:k,android:d.indexOf("android")!==-1,android23:i,chrome:j,safari:!j&&d.indexOf("safari")!==-1,win:l,ie3d:p,webkit3d:q,gecko3d:r,opera12:s,any3d:!a.L_DISABLE_3D&&(p||q||r)&&!s&&!h,mobile:m,mobileWebkit:m&&g,mobileWebkit3d:m&&q,mobileOpera:m&&a.opera,mobileGecko:m&&k,touch:!!t,msPointer:!!n,pointer:!!o,retina:(a.devicePixelRatio||a.screen.deviceXDPI/a.screen.logicalXDPI)>1}}(),c.Point=function(a,b,c){this.x=c?Math.round(a):a,this.y=c?Math.round(b):b},c.Point.prototype={clone:function(){return new c.Point(this.x,this.y)},add:function(a){return this.clone()._add(c.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(c.point(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new c.Point(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new c.Point(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(a){a=c.point(a);var b=a.x-this.x,d=a.y-this.y;return Math.sqrt(b*b+d*d)},equals:function(a){return a=c.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=c.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+c.Util.formatNum(this.x)+", "+c.Util.formatNum(this.y)+")"}},c.point=function(a,b,d){return a instanceof c.Point?a:c.Util.isArray(a)?new c.Point(a[0],a[1]):void 0===a||null===a?a:"object"==typeof a&&"x"in a&&"y"in a?new c.Point(a.x,a.y):new c.Point(a,b,d)},c.Bounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;d<e;d++)this.extend(c[d])},c.Bounds.prototype={extend:function(a){return a=c.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new c.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new c.Point(this.min.x,this.max.y)},getTopRight:function(){return new c.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var b,d;return a="number"==typeof a[0]||a instanceof c.Point?c.point(a):c.bounds(a),a instanceof c.Bounds?(b=a.min,d=a.max):b=d=a,b.x>=this.min.x&&d.x<=this.max.x&&b.y>=this.min.y&&d.y<=this.max.y},intersects:function(a){a=c.bounds(a);var b=this.min,d=this.max,e=a.min,f=a.max,g=f.x>=b.x&&e.x<=d.x,h=f.y>=b.y&&e.y<=d.y;return g&&h},overlaps:function(a){a=c.bounds(a);var b=this.min,d=this.max,e=a.min,f=a.max,g=f.x>b.x&&e.x<d.x,h=f.y>b.y&&e.y<d.y;return g&&h},isValid:function(){return!(!this.min||!this.max)}},c.bounds=function(a,b){return!a||a instanceof c.Bounds?a:new c.Bounds(a,b)},c.Transformation=function(a,b,c,d){this._a=a,this._b=b,this._c=c,this._d=d},c.Transformation.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(a,b){return b=b||1,new c.Point((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}},c.DomUtil={get:function(a){return"string"==typeof a?b.getElementById(a):a},getStyle:function(a,c){var d=a.style[c]||a.currentStyle&&a.currentStyle[c];if((!d||"auto"===d)&&b.defaultView){var e=b.defaultView.getComputedStyle(a,null);d=e?e[c]:null}return"auto"===d?null:d},create:function(a,c,d){var e=b.createElement(a);return e.className=c||"",d&&d.appendChild(e),e},remove:function(a){var b=a.parentNode;b&&b.removeChild(a)},empty:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},toFront:function(a){a.parentNode.appendChild(a)},toBack:function(a){var b=a.parentNode;b.insertBefore(a,b.firstChild)},hasClass:function(a,b){if(void 0!==a.classList)return a.classList.contains(b);var d=c.DomUtil.getClass(a);return d.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(d)},addClass:function(a,b){if(void 0!==a.classList)for(var d=c.Util.splitWords(b),e=0,f=d.length;e<f;e++)a.classList.add(d[e]);else if(!c.DomUtil.hasClass(a,b)){var g=c.DomUtil.getClass(a);c.DomUtil.setClass(a,(g?g+" ":"")+b)}},removeClass:function(a,b){void 0!==a.classList?a.classList.remove(b):c.DomUtil.setClass(a,c.Util.trim((" "+c.DomUtil.getClass(a)+" ").replace(" "+b+" "," ")))},setClass:function(a,b){void 0===a.className.baseVal?a.className=b:a.className.baseVal=b},getClass:function(a){return void 0===a.className.baseVal?a.className:a.className.baseVal},setOpacity:function(a,b){"opacity"in a.style?a.style.opacity=b:"filter"in a.style&&c.DomUtil._setOpacityIE(a,b)},_setOpacityIE:function(a,b){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=a.filters.item(d)}catch(a){if(1===b)return}b=Math.round(100*b),c?(c.Enabled=100!==b,c.Opacity=b):a.style.filter+=" progid:"+d+"(opacity="+b+")"},testProp:function(a){for(var c=b.documentElement.style,d=0;d<a.length;d++)if(a[d]in c)return a[d];return!1},setTransform:function(a,b,d){var e=b||new c.Point(0,0);a.style[c.DomUtil.TRANSFORM]=(c.Browser.ie3d?"translate("+e.x+"px,"+e.y+"px)":"translate3d("+e.x+"px,"+e.y+"px,0)")+(d?" scale("+d+")":"")},setPosition:function(a,b){a._leaflet_pos=b,c.Browser.any3d?c.DomUtil.setTransform(a,b):(a.style.left=b.x+"px",a.style.top=b.y+"px")},getPosition:function(a){return a._leaflet_pos||new c.Point(0,0)}},function(){c.DomUtil.TRANSFORM=c.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var d=c.DomUtil.TRANSITION=c.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(c.DomUtil.TRANSITION_END="webkitTransition"===d||"OTransition"===d?d+"End":"transitionend","onselectstart"in b)c.DomUtil.disableTextSelection=function(){c.DomEvent.on(a,"selectstart",c.DomEvent.preventDefault)},c.DomUtil.enableTextSelection=function(){c.DomEvent.off(a,"selectstart",c.DomEvent.preventDefault)};else{var e=c.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);c.DomUtil.disableTextSelection=function(){if(e){var a=b.documentElement.style;this._userSelect=a[e],a[e]="none"}},c.DomUtil.enableTextSelection=function(){e&&(b.documentElement.style[e]=this._userSelect,delete this._userSelect)}}c.DomUtil.disableImageDrag=function(){c.DomEvent.on(a,"dragstart",c.DomEvent.preventDefault)},c.DomUtil.enableImageDrag=function(){c.DomEvent.off(a,"dragstart",c.DomEvent.preventDefault)},c.DomUtil.preventOutline=function(b){for(;b.tabIndex===-1;)b=b.parentNode;b&&b.style&&(c.DomUtil.restoreOutline(),this._outlineElement=b,this._outlineStyle=b.style.outline,b.style.outline="none",c.DomEvent.on(a,"keydown",c.DomUtil.restoreOutline,this))},c.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,c.DomEvent.off(a,"keydown",c.DomUtil.restoreOutline,this))}}(),c.LatLng=function(a,b,c){if(isNaN(a)||isNaN(b))throw new Error("Invalid LatLng object: ("+a+", "+b+")");this.lat=+a,this.lng=+b,void 0!==c&&(this.alt=+c)},c.LatLng.prototype={equals:function(a,b){return!!a&&(a=c.latLng(a),Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng))<=(void 0===b?1e-9:b))},toString:function(a){return"LatLng("+c.Util.formatNum(this.lat,a)+", "+c.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){return c.CRS.Earth.distance(this,c.latLng(a))},wrap:function(){return c.CRS.Earth.wrapLatLng(this)},toBounds:function(a){var b=180*a/40075017,d=b/Math.cos(Math.PI/180*this.lat);return c.latLngBounds([this.lat-b,this.lng-d],[this.lat+b,this.lng+d])},clone:function(){return new c.LatLng(this.lat,this.lng,this.alt)}},c.latLng=function(a,b,d){return a instanceof c.LatLng?a:c.Util.isArray(a)&&"object"!=typeof a[0]?3===a.length?new c.LatLng(a[0],a[1],a[2]):2===a.length?new c.LatLng(a[0],a[1]):null:void 0===a||null===a?a:"object"==typeof a&&"lat"in a?new c.LatLng(a.lat,"lng"in a?a.lng:a.lon,a.alt):void 0===b?null:new c.LatLng(a,b,d)},c.LatLngBounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;d<e;d++)this.extend(c[d])},c.LatLngBounds.prototype={extend:function(a){var b,d,e=this._southWest,f=this._northEast;if(a instanceof c.LatLng)b=a,d=a;else{if(!(a instanceof c.LatLngBounds))return a?this.extend(c.latLng(a)||c.latLngBounds(a)):this;if(b=a._southWest,d=a._northEast,!b||!d)return this}return e||f?(e.lat=Math.min(b.lat,e.lat),e.lng=Math.min(b.lng,e.lng),f.lat=Math.max(d.lat,f.lat),f.lng=Math.max(d.lng,f.lng)):(this._southWest=new c.LatLng(b.lat,b.lng),this._northEast=new c.LatLng(d.lat,d.lng)),this},pad:function(a){var b=this._southWest,d=this._northEast,e=Math.abs(b.lat-d.lat)*a,f=Math.abs(b.lng-d.lng)*a;return new c.LatLngBounds(new c.LatLng(b.lat-e,b.lng-f),new c.LatLng(d.lat+e,d.lng+f))},getCenter:function(){return new c.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new c.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new c.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof c.LatLng||"lat"in a?c.latLng(a):c.latLngBounds(a);var b,d,e=this._southWest,f=this._northEast;return a instanceof c.LatLngBounds?(b=a.getSouthWest(),d=a.getNorthEast()):b=d=a,b.lat>=e.lat&&d.lat<=f.lat&&b.lng>=e.lng&&d.lng<=f.lng},intersects:function(a){a=c.latLngBounds(a);var b=this._southWest,d=this._northEast,e=a.getSouthWest(),f=a.getNorthEast(),g=f.lat>=b.lat&&e.lat<=d.lat,h=f.lng>=b.lng&&e.lng<=d.lng;return g&&h},overlaps:function(a){a=c.latLngBounds(a);var b=this._southWest,d=this._northEast,e=a.getSouthWest(),f=a.getNorthEast(),g=f.lat>b.lat&&e.lat<d.lat,h=f.lng>b.lng&&e.lng<d.lng;return g&&h},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a){return!!a&&(a=c.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},c.latLngBounds=function(a,b){return a instanceof c.LatLngBounds?a:new c.LatLngBounds(a,b)},c.Projection={},c.Projection.LonLat={project:function(a){return new c.Point(a.lng,a.lat)},unproject:function(a){return new c.LatLng(a.y,a.x)},bounds:c.bounds([-180,-90],[180,90])},c.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(a){var b=Math.PI/180,d=this.MAX_LATITUDE,e=Math.max(Math.min(d,a.lat),-d),f=Math.sin(e*b);return new c.Point(this.R*a.lng*b,this.R*Math.log((1+f)/(1-f))/2)},unproject:function(a){var b=180/Math.PI;return new c.LatLng((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*b,a.x*b/this.R)},bounds:function(){var a=6378137*Math.PI;return c.bounds([-a,-a],[a,a])}()},c.CRS={latLngToPoint:function(a,b){var c=this.projection.project(a),d=this.scale(b);return this.transformation._transform(c,d)},pointToLatLng:function(a,b){var c=this.scale(b),d=this.transformation.untransform(a,c);return this.projection.unproject(d)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var b=this.projection.bounds,d=this.scale(a),e=this.transformation.transform(b.min,d),f=this.transformation.transform(b.max,d);return c.bounds(e,f)},infinite:!1,wrapLatLng:function(a){var b=this.wrapLng?c.Util.wrapNum(a.lng,this.wrapLng,!0):a.lng,d=this.wrapLat?c.Util.wrapNum(a.lat,this.wrapLat,!0):a.lat,e=a.alt;return c.latLng(d,b,e)},wrapLatLngBounds:function(a){var b=a.getCenter(),d=this.wrapLatLng(b),e=b.lat-d.lat,f=b.lng-d.lng;if(0===e&&0===f)return a;var g=a.getSouthWest(),h=a.getNorthEast(),i=c.latLng({lat:g.lat-e,lng:g.lng-f}),j=c.latLng({lat:h.lat-e,lng:h.lng-f});return new c.LatLngBounds(i,j)}},c.CRS.Simple=c.extend({},c.CRS,{projection:c.Projection.LonLat,transformation:new c.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,b){var c=b.lng-a.lng,d=b.lat-a.lat;return Math.sqrt(c*c+d*d)},infinite:!0}),c.CRS.Earth=c.extend({},c.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(a,b){var c=Math.PI/180,d=a.lat*c,e=b.lat*c,f=Math.sin(d)*Math.sin(e)+Math.cos(d)*Math.cos(e)*Math.cos((b.lng-a.lng)*c);return this.R*Math.acos(Math.min(f,1))}}),c.CRS.EPSG3857=c.extend({},c.CRS.Earth,{code:"EPSG:3857",projection:c.Projection.SphericalMercator,transformation:function(){var a=.5/(Math.PI*c.Projection.SphericalMercator.R);return new c.Transformation(a,.5,-a,.5)}()}),c.CRS.EPSG900913=c.extend({},c.CRS.EPSG3857,{code:"EPSG:900913"}),c.CRS.EPSG4326=c.extend({},c.CRS.Earth,{code:"EPSG:4326",projection:c.Projection.LonLat,transformation:new c.Transformation(1/180,1,-1/180,.5)}),c.Map=c.Evented.extend({options:{crs:c.CRS.EPSG3857,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,b){b=c.setOptions(this,b),this._initContainer(a),this._initLayout(),this._onResize=c.bind(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),void 0!==b.zoom&&(this._zoom=this._limitZoom(b.zoom)),b.center&&void 0!==b.zoom&&this.setView(c.latLng(b.center),b.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=c.DomUtil.TRANSITION&&c.Browser.any3d&&!c.Browser.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),c.DomEvent.on(this._proxy,c.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,b,d){if(b=void 0===b?this._zoom:this._limitZoom(b),a=this._limitCenter(c.latLng(a),b,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){void 0!==d.animate&&(d.zoom=c.extend({animate:d.animate},d.zoom),d.pan=c.extend({animate:d.animate,duration:d.duration},d.pan));if(this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,b,d.zoom):this._tryAnimatedPan(a,d.pan))return clearTimeout(this._sizeTimer),this}return this._resetView(a,b),this},setZoom:function(a,b){return this._loaded?this.setView(this.getCenter(),a,{zoom:b}):(this._zoom=a,this)},zoomIn:function(a,b){return a=a||(c.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,b)},zoomOut:function(a,b){return a=a||(c.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,b)},setZoomAround:function(a,b,d){var e=this.getZoomScale(b),f=this.getSize().divideBy(2),g=a instanceof c.Point?a:this.latLngToContainerPoint(a),h=g.subtract(f).multiplyBy(1-1/e),i=this.containerPointToLatLng(f.add(h));return this.setView(i,b,{zoom:d})},_getBoundsCenterZoom:function(a,b){b=b||{},a=a.getBounds?a.getBounds():c.latLngBounds(a);var d=c.point(b.paddingTopLeft||b.padding||[0,0]),e=c.point(b.paddingBottomRight||b.padding||[0,0]),f=this.getBoundsZoom(a,!1,d.add(e));f="number"==typeof b.maxZoom?Math.min(b.maxZoom,f):f;var g=e.subtract(d).divideBy(2),h=this.project(a.getSouthWest(),f),i=this.project(a.getNorthEast(),f);return{center:this.unproject(h.add(i).divideBy(2).add(g),f),zoom:f}},fitBounds:function(a,b){if(a=c.latLngBounds(a),!a.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(a,b);return this.setView(d.center,d.zoom,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})},panBy:function(a,b){if(a=c.point(a).round(),b=b||{},!a.x&&!a.y)return this.fire("moveend");if(b.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new c.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){c.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,d,b.duration||.25,b.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,b,d){function e(a){var b=a?-1:1,c=a?r:q,d=r*r-q*q+b*u*u*s*s,e=2*c*u*s,f=d/e,g=Math.sqrt(f*f+1)-f;return g<1e-9?-18:Math.log(g)}function f(a){return(Math.exp(a)-Math.exp(-a))/2}function g(a){return(Math.exp(a)+Math.exp(-a))/2}function h(a){return f(a)/g(a)}function i(a){return q*(g(v)/g(v+t*a))}function j(a){return q*(g(v)*h(v+t*a)-f(v))/u}function k(a){return 1-Math.pow(1-a,1.5)}function l(){var d=(Date.now()-w)/y,e=k(d)*x;d<=1?(this._flyToFrame=c.Util.requestAnimFrame(l,this),this._move(this.unproject(m.add(n.subtract(m).multiplyBy(j(e)/s)),p),this.getScaleZoom(q/i(e),p),{flyTo:!0})):this._move(a,b)._moveEnd(!0)}if(d=d||{},d.animate===!1||!c.Browser.any3d)return this.setView(a,b,d);this._stop();var m=this.project(this.getCenter()),n=this.project(a),o=this.getSize(),p=this._zoom;a=c.latLng(a),b=void 0===b?p:b;var q=Math.max(o.x,o.y),r=q*this.getZoomScale(p,b),s=n.distanceTo(m)||1,t=1.42,u=t*t,v=e(0),w=Date.now(),x=(e(1)-v)/t,y=d.duration?1e3*d.duration:1e3*x*.8;return this._moveStart(!0),l.call(this),this},flyToBounds:function(a,b){var c=this._getBoundsCenterZoom(a,b);return this.flyTo(c.center,c.zoom,b)},setMaxBounds:function(a){return a=c.latLngBounds(a),a.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(a){return this.options.minZoom=a,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(a):this},setMaxZoom:function(a){return this.options.maxZoom=a,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(a):this},panInsideBounds:function(a,b){this._enforcingBounds=!0;var d=this.getCenter(),e=this._limitCenter(d,this._zoom,c.latLngBounds(a));return d.equals(e)||this.panTo(e,b),this._enforcingBounds=!1,this},invalidateSize:function(a){if(!this._loaded)return this;a=c.extend({animate:!1,pan:!0},a===!0?{animate:!0}:a);var b=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),e=b.divideBy(2).round(),f=d.divideBy(2).round(),g=e.subtract(f);return g.x||g.y?(a.animate&&a.pan?this.panBy(g):(a.pan&&this._rawPanBy(g),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:d})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=c.extend({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=c.bind(this._handleGeolocationResponse,this),d=c.bind(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,d,a):navigator.geolocation.getCurrentPosition(b,d,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var b=a.code,c=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+c+"."})},_handleGeolocationResponse:function(a){var b=a.coords.latitude,d=a.coords.longitude,e=new c.LatLng(b,d),f=e.toBounds(a.coords.accuracy),g=this._locateOptions;if(g.setView){var h=this.getBoundsZoom(f);this.setView(e,g.maxZoom?Math.min(h,g.maxZoom):h)}var i={latlng:e,bounds:f,timestamp:a.timestamp};for(var j in a.coords)"number"==typeof a.coords[j]&&(i[j]=a.coords[j]);this.fire("locationfound",i)},addHandler:function(a,b){if(!b)return this;var c=this[a]=new b(this);return this._handlers.push(c),this.options[a]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(a){this._container._leaflet_id=void 0,this._containerId=void 0}c.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var a in this._layers)this._layers[a].remove();return this},createPane:function(a,b){var d="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),e=c.DomUtil.create("div",d,b||this._mapPane);return a&&(this._panes[a]=e),e},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft()),d=this.unproject(a.getTopRight());return new c.LatLngBounds(b,d)},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,b,d){a=c.latLngBounds(a),d=c.point(d||[0,0]);var e=this.getZoom()||0,f=this.getMinZoom(),g=this.getMaxZoom(),h=a.getNorthWest(),i=a.getSouthEast(),j=this.getSize().subtract(d),k=c.bounds(this.project(i,e),this.project(h,e)).getSize(),l=c.Browser.any3d?this.options.zoomSnap:1,m=Math.min(j.x/k.x,j.y/k.y);return e=this.getScaleZoom(m,e),l&&(e=Math.round(e/(l/100))*(l/100),e=b?Math.ceil(e/l)*l:Math.floor(e/l)*l),Math.max(f,Math.min(g,e))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new c.Point(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,b){var d=this._getTopLeftPoint(a,b);return new c.Bounds(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(void 0===a?this.getZoom():a)},getPane:function(a){return"string"==typeof a?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,b){var c=this.options.crs;return b=void 0===b?this._zoom:b,c.scale(a)/c.scale(b)},getScaleZoom:function(a,b){var c=this.options.crs;b=void 0===b?this._zoom:b;var d=c.zoom(a*c.scale(b));return isNaN(d)?1/0:d},project:function(a,b){return b=void 0===b?this._zoom:b,this.options.crs.latLngToPoint(c.latLng(a),b)},unproject:function(a,b){return b=void 0===b?this._zoom:b,this.options.crs.pointToLatLng(c.point(a),b)},layerPointToLatLng:function(a){var b=c.point(a).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(a){return this.project(c.latLng(a))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(c.latLng(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(c.latLngBounds(a))},distance:function(a,b){return this.options.crs.distance(c.latLng(a),c.latLng(b))},containerPointToLayerPoint:function(a){return c.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return c.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var b=this.containerPointToLayerPoint(c.point(a));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(c.latLng(a)))},mouseEventToContainerPoint:function(a){return c.DomEvent.getMousePosition(a,this._container)},
mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var b=this._container=c.DomUtil.get(a);if(!b)throw new Error("Map container not found.");if(b._leaflet_id)throw new Error("Map container is already initialized.");c.DomEvent.addListener(b,"scroll",this._onScroll,this),this._containerId=c.Util.stamp(b)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&c.Browser.any3d,c.DomUtil.addClass(a,"leaflet-container"+(c.Browser.touch?" leaflet-touch":"")+(c.Browser.retina?" leaflet-retina":"")+(c.Browser.ielt9?" leaflet-oldie":"")+(c.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var b=c.DomUtil.getStyle(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),c.DomUtil.setPosition(this._mapPane,new c.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(c.DomUtil.addClass(a.markerPane,"leaflet-zoom-hide"),c.DomUtil.addClass(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,b){c.DomUtil.setPosition(this._mapPane,new c.Point(0,0));var d=!this._loaded;this._loaded=!0,b=this._limitZoom(b),this.fire("viewprereset");var e=this._zoom!==b;this._moveStart(e)._move(a,b)._moveEnd(e),this.fire("viewreset"),d&&this.fire("load")},_moveStart:function(a){return a&&this.fire("zoomstart"),this.fire("movestart")},_move:function(a,b,c){void 0===b&&(b=this._zoom);var d=this._zoom!==b;return this._zoom=b,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),(d||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return c.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){c.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(b){if(c.DomEvent){this._targets={},this._targets[c.stamp(this._container)]=this;var d=b?"off":"on";c.DomEvent[d](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&c.DomEvent[d](a,"resize",this._onResize,this),c.Browser.any3d&&this.options.transform3DLimit&&this[d]("moveend",this._onMoveEnd)}},_onResize:function(){c.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=c.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,b){for(var d,e=[],f="mouseout"===b||"mouseover"===b,g=a.target||a.srcElement,h=!1;g;){if((d=this._targets[c.stamp(g)])&&("click"===b||"preclick"===b)&&!a._simulated&&this._draggableMoved(d)){h=!0;break}if(d&&d.listens(b,!0)){if(f&&!c.DomEvent._isExternalTarget(g,a))break;if(e.push(d),f)break}if(g===this._container)break;g=g.parentNode}return e.length||h||f||!c.DomEvent._isExternalTarget(g,a)||(e=[this]),e},_handleDOMEvent:function(a){if(this._loaded&&!c.DomEvent._skipped(a)){var b="keypress"===a.type&&13===a.keyCode?"click":a.type;"mousedown"===b&&c.DomUtil.preventOutline(a.target||a.srcElement),this._fireDOMEvent(a,b)}},_fireDOMEvent:function(a,b,d){if("click"===a.type){var e=c.Util.extend({},a);e.type="preclick",this._fireDOMEvent(e,e.type,d)}if(!a._stopped&&(d=(d||[]).concat(this._findEventTargets(a,b)),d.length)){var f=d[0];"contextmenu"===b&&f.listens(b,!0)&&c.DomEvent.preventDefault(a);var g={originalEvent:a};if("keypress"!==a.type){var h=f instanceof c.Marker;g.containerPoint=h?this.latLngToContainerPoint(f.getLatLng()):this.mouseEventToContainerPoint(a),g.layerPoint=this.containerPointToLayerPoint(g.containerPoint),g.latlng=h?f.getLatLng():this.layerPointToLatLng(g.layerPoint)}for(var i=0;i<d.length;i++)if(d[i].fire(b,g,!0),g.originalEvent._stopped||d[i].options.nonBubblingEvents&&c.Util.indexOf(d[i].options.nonBubblingEvents,b)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,b=this._handlers.length;a<b;a++)this._handlers[a].disable()},whenReady:function(a,b){return this._loaded?a.call(b||this,{target:this}):this.on("load",a,b),this},_getMapPanePos:function(){return c.DomUtil.getPosition(this._mapPane)||new c.Point(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,b){return(a&&void 0!==b?this._getNewPixelOrigin(a,b):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,b,c){var d=this._getNewPixelOrigin(c,b);return this.project(a,b)._subtract(d)},_latLngBoundsToNewLayerBounds:function(a,b,d){var e=this._getNewPixelOrigin(d,b);return c.bounds([this.project(a.getSouthWest(),b)._subtract(e),this.project(a.getNorthWest(),b)._subtract(e),this.project(a.getSouthEast(),b)._subtract(e),this.project(a.getNorthEast(),b)._subtract(e)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,b,d){if(!d)return a;var e=this.project(a,b),f=this.getSize().divideBy(2),g=new c.Bounds(e.subtract(f),e.add(f)),h=this._getBoundsOffset(g,d,b);return h.round().equals([0,0])?a:this.unproject(e.add(h),b)},_limitOffset:function(a,b){if(!b)return a;var d=this.getPixelBounds(),e=new c.Bounds(d.min.add(a),d.max.add(a));return a.add(this._getBoundsOffset(e,b))},_getBoundsOffset:function(a,b,d){var e=c.bounds(this.project(b.getNorthEast(),d),this.project(b.getSouthWest(),d)),f=e.min.subtract(a.min),g=e.max.subtract(a.max),h=this._rebound(f.x,-g.x),i=this._rebound(f.y,-g.y);return new c.Point(h,i)},_rebound:function(a,b){return a+b>0?Math.round(a-b)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(b))},_limitZoom:function(a){var b=this.getMinZoom(),d=this.getMaxZoom(),e=c.Browser.any3d?this.options.zoomSnap:1;return e&&(a=Math.round(a/e)*e),Math.max(b,Math.min(d,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){c.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,b){var c=this._getCenterOffset(a)._floor();return!((b&&b.animate)!==!0&&!this.getSize().contains(c))&&(this.panBy(c,b),!0)},_createAnimProxy:function(){var a=this._proxy=c.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(b){var d=c.DomUtil.TRANSFORM,e=a.style[d];c.DomUtil.setTransform(a,this.project(b.center,b.zoom),this.getZoomScale(b.zoom,1)),e===a.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var b=this.getCenter(),d=this.getZoom();c.DomUtil.setTransform(a,this.project(b,d),this.getZoomScale(d,1))},this)},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,b,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var e=this.getZoomScale(b),f=this._getCenterOffset(a)._divideBy(1-1/e);return!(d.animate!==!0&&!this.getSize().contains(f))&&(c.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(a,b,!0)},this),!0)},_animateZoom:function(a,b,d,e){d&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=b,c.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:b,noUpdate:e}),setTimeout(c.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(c.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),c.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}),c.map=function(a,b){return new c.Map(a,b)},c.Layer=c.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[],attribution:null},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[c.stamp(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[c.stamp(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var b=a.target;if(b.hasLayer(this)){if(this._map=b,this._zoomAnimated=b._zoomAnimated,this.getEvents){var c=this.getEvents();b.on(c,this),this.once("remove",function(){b.off(c,this)},this)}this.onAdd(b),this.getAttribution&&b.attributionControl&&b.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),b.fire("layeradd",{layer:this})}}}),c.Map.include({addLayer:function(a){var b=c.stamp(a);return this._layers[b]?this:(this._layers[b]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var b=c.stamp(a);return this._layers[b]?(this._loaded&&a.onRemove(this),a.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(a.getAttribution()),delete this._layers[b],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return!!a&&c.stamp(a)in this._layers},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},_addLayers:function(a){a=a?c.Util.isArray(a)?a:[a]:[];for(var b=0,d=a.length;b<d;b++)this.addLayer(a[b])},_addZoomLimit:function(a){!isNaN(a.options.maxZoom)&&isNaN(a.options.minZoom)||(this._zoomBoundLayers[c.stamp(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var b=c.stamp(a);this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,b=-(1/0),c=this._getZoomSpan();for(var d in this._zoomBoundLayers){var e=this._zoomBoundLayers[d].options;a=void 0===e.minZoom?a:Math.min(a,e.minZoom),b=void 0===e.maxZoom?b:Math.max(b,e.maxZoom)}this._layersMaxZoom=b===-(1/0)?void 0:b,this._layersMinZoom=a===1/0?void 0:a,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var e="_leaflet_events";c.DomEvent={on:function(a,b,d,e){if("object"==typeof b)for(var f in b)this._on(a,f,b[f],d);else{b=c.Util.splitWords(b);for(var g=0,h=b.length;g<h;g++)this._on(a,b[g],d,e)}return this},off:function(a,b,d,e){if("object"==typeof b)for(var f in b)this._off(a,f,b[f],d);else{b=c.Util.splitWords(b);for(var g=0,h=b.length;g<h;g++)this._off(a,b[g],d,e)}return this},_on:function(b,d,f,g){var h=d+c.stamp(f)+(g?"_"+c.stamp(g):"");if(b[e]&&b[e][h])return this;var i=function(c){return f.call(g||b,c||a.event)},j=i;return c.Browser.pointer&&0===d.indexOf("touch")?this.addPointerListener(b,d,i,h):!c.Browser.touch||"dblclick"!==d||!this.addDoubleTapListener||c.Browser.pointer&&c.Browser.chrome?"addEventListener"in b?"mousewheel"===d?b.addEventListener("onwheel"in b?"wheel":"mousewheel",i,!1):"mouseenter"===d||"mouseleave"===d?(i=function(d){d=d||a.event,c.DomEvent._isExternalTarget(b,d)&&j(d)},b.addEventListener("mouseenter"===d?"mouseover":"mouseout",i,!1)):("click"===d&&c.Browser.android&&(i=function(a){return c.DomEvent._filterClick(a,j)}),b.addEventListener(d,i,!1)):"attachEvent"in b&&b.attachEvent("on"+d,i):this.addDoubleTapListener(b,i,h),b[e]=b[e]||{},b[e][h]=i,this},_off:function(a,b,d,f){var g=b+c.stamp(d)+(f?"_"+c.stamp(f):""),h=a[e]&&a[e][g];return h?(c.Browser.pointer&&0===b.indexOf("touch")?this.removePointerListener(a,b,g):c.Browser.touch&&"dblclick"===b&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,g):"removeEventListener"in a?"mousewheel"===b?a.removeEventListener("onwheel"in a?"wheel":"mousewheel",h,!1):a.removeEventListener("mouseenter"===b?"mouseover":"mouseleave"===b?"mouseout":b,h,!1):"detachEvent"in a&&a.detachEvent("on"+b,h),a[e][g]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,c.DomEvent._skipped(a),this},disableScrollPropagation:function(a){return c.DomEvent.on(a,"mousewheel",c.DomEvent.stopPropagation)},disableClickPropagation:function(a){var b=c.DomEvent.stopPropagation;return c.DomEvent.on(a,c.Draggable.START.join(" "),b),c.DomEvent.on(a,{click:c.DomEvent._fakeStop,dblclick:b})},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(a){return c.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,b){if(!b)return new c.Point(a.clientX,a.clientY);var d=b.getBoundingClientRect();return new c.Point(a.clientX-d.left-b.clientLeft,a.clientY-d.top-b.clientTop)},_wheelPxFactor:c.Browser.win&&c.Browser.chrome?2:c.Browser.gecko?a.devicePixelRatio:1,getWheelDelta:function(a){return c.Browser.edge?a.wheelDeltaY/2:a.deltaY&&0===a.deltaMode?-a.deltaY/c.DomEvent._wheelPxFactor:a.deltaY&&1===a.deltaMode?20*-a.deltaY:a.deltaY&&2===a.deltaMode?60*-a.deltaY:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?20*-a.detail:a.detail?a.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(a){c.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var b=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,b},_isExternalTarget:function(a,b){var c=b.relatedTarget;if(!c)return!0;try{for(;c&&c!==a;)c=c.parentNode}catch(a){return!1}return c!==a},_filterClick:function(a,b){var d=a.timeStamp||a.originalEvent&&a.originalEvent.timeStamp,e=c.DomEvent._lastClick&&d-c.DomEvent._lastClick;if(e&&e>100&&e<500||a.target._simulatedClick&&!a._simulated)return void c.DomEvent.stop(a);c.DomEvent._lastClick=d,b(a)}},c.DomEvent.addListener=c.DomEvent.on,c.DomEvent.removeListener=c.DomEvent.off,c.PosAnimation=c.Evented.extend({run:function(a,b,d,e){this.stop(),this._el=a,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(e||.5,.2),this._startPos=c.DomUtil.getPosition(a),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=c.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(a){var b=+new Date-this._startTime,c=1e3*this._duration;b<c?this._runFrame(this._easeOut(b/c),a):(this._runFrame(1),this._complete())},_runFrame:function(a,b){var d=this._startPos.add(this._offset.multiplyBy(a));b&&d._round(),c.DomUtil.setPosition(this._el,d),this.fire("step")},_complete:function(){c.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),c.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:c.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(a){var b=Math.PI/180,d=this.R,e=a.lat*b,f=this.R_MINOR/d,g=Math.sqrt(1-f*f),h=g*Math.sin(e),i=Math.tan(Math.PI/4-e/2)/Math.pow((1-h)/(1+h),g/2);return e=-d*Math.log(Math.max(i,1e-10)),new c.Point(a.lng*b*d,e)},unproject:function(a){for(var b,d=180/Math.PI,e=this.R,f=this.R_MINOR/e,g=Math.sqrt(1-f*f),h=Math.exp(-a.y/e),i=Math.PI/2-2*Math.atan(h),j=0,k=.1;j<15&&Math.abs(k)>1e-7;j++)b=g*Math.sin(i),b=Math.pow((1-b)/(1+b),g/2),k=Math.PI/2-2*Math.atan(h*b)-i,i+=k;return new c.LatLng(i*d,a.x*d/e)}},c.CRS.EPSG3395=c.extend({},c.CRS.Earth,{code:"EPSG:3395",projection:c.Projection.Mercator,transformation:function(){var a=.5/(Math.PI*c.Projection.Mercator.R);return new c.Transformation(a,.5,-a,.5)}()}),c.GridLayer=c.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:c.Browser.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){c.setOptions(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),c.DomUtil.remove(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(c.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(c.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return b.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof c.Point?a:new c.Point(a,a)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var b,c=this.getPane().children,d=-a(-(1/0),1/0),e=0,f=c.length;e<f;e++)b=c[e].style.zIndex,c[e]!==this._container&&b&&(d=a(d,+b));isFinite(d)&&(this.options.zIndex=d+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!c.Browser.ielt9){c.DomUtil.setOpacity(this._container,this.options.opacity);var a=+new Date,b=!1,d=!1;for(var e in this._tiles){var f=this._tiles[e];if(f.current&&f.loaded){var g=Math.min(1,(a-f.loaded)/200);c.DomUtil.setOpacity(f.el,g),g<1?b=!0:(f.active&&(d=!0),f.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),b&&(c.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=c.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=c.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,b=this.options.maxZoom;if(void 0!==a){for(var d in this._levels)this._levels[d].el.children.length||d===a?this._levels[d].el.style.zIndex=b-Math.abs(a-d):(c.DomUtil.remove(this._levels[d].el),this._removeTilesAtZoom(d),delete this._levels[d]);var e=this._levels[a],f=this._map;return e||(e=this._levels[a]={},e.el=c.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),e.el.style.zIndex=b,e.origin=f.project(f.unproject(f.getPixelOrigin()),a).round(),e.zoom=a,this._setZoomTransform(e,f.getCenter(),f.getZoom()),c.Util.falseFn(e.el.offsetWidth)),this._level=e,e}},_pruneTiles:function(){if(this._map){var a,b,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom)return void this._removeAllTiles();for(a in this._tiles)b=this._tiles[a],b.retain=b.current;for(a in this._tiles)if(b=this._tiles[a],b.current&&!b.active){var d=b.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var b in this._tiles)this._tiles[b].coords.z===a&&this._removeTile(b)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)c.DomUtil.remove(this._levels[a].el),delete this._levels[a];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(a,b,d,e){var f=Math.floor(a/2),g=Math.floor(b/2),h=d-1,i=new c.Point(+f,+g);i.z=+h;var j=this._tileCoordsToKey(i),k=this._tiles[j];return k&&k.active?(k.retain=!0,!0):(k&&k.loaded&&(k.retain=!0),h>e&&this._retainParent(f,g,h,e))},_retainChildren:function(a,b,d,e){for(var f=2*a;f<2*a+2;f++)for(var g=2*b;g<2*b+2;g++){var h=new c.Point(f,g);h.z=d+1;var i=this._tileCoordsToKey(h),j=this._tiles[i];j&&j.active?j.retain=!0:(j&&j.loaded&&(j.retain=!0),d+1<e&&this._retainChildren(f,g,d+1,e))}},_resetView:function(a){var b=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),b,b)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_setView:function(a,b,c,d){var e=Math.round(b);(void 0!==this.options.maxZoom&&e>this.options.maxZoom||void 0!==this.options.minZoom&&e<this.options.minZoom)&&(e=void 0);var f=this.options.updateWhenZooming&&e!==this._tileZoom;d&&!f||(this._tileZoom=e,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==e&&this._update(a),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(a,b)},_setZoomTransforms:function(a,b){for(var c in this._levels)this._setZoomTransform(this._levels[c],a,b)},_setZoomTransform:function(a,b,d){var e=this._map.getZoomScale(d,a.zoom),f=a.origin.multiplyBy(e).subtract(this._map._getNewPixelOrigin(b,d)).round();c.Browser.any3d?c.DomUtil.setTransform(a.el,f,e):c.DomUtil.setPosition(a.el,f)},_resetGrid:function(){var a=this._map,b=a.options.crs,c=this._tileSize=this.getTileSize(),d=this._tileZoom,e=this._map.getPixelWorldBounds(this._tileZoom);e&&(this._globalTileRange=this._pxBoundsToTileRange(e)),this._wrapX=b.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,b.wrapLng[0]],d).x/c.x),Math.ceil(a.project([0,b.wrapLng[1]],d).x/c.y)],this._wrapY=b.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([b.wrapLat[0],0],d).y/c.x),Math.ceil(a.project([b.wrapLat[1],0],d).y/c.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(a){var b=this._map,d=b._animatingZoom?Math.max(b._animateToZoom,b.getZoom()):b.getZoom(),e=b.getZoomScale(d,this._tileZoom),f=b.project(a,this._tileZoom).floor(),g=b.getSize().divideBy(2*e);return new c.Bounds(f.subtract(g),f.add(g))},_update:function(a){var d=this._map;if(d){var e=d.getZoom();if(void 0===a&&(a=d.getCenter()),void 0!==this._tileZoom){var f=this._getTiledPixelBounds(a),g=this._pxBoundsToTileRange(f),h=g.getCenter(),i=[],j=this.options.keepBuffer,k=new c.Bounds(g.getBottomLeft().subtract([j,-j]),g.getTopRight().add([j,-j]));for(var l in this._tiles){var m=this._tiles[l].coords;m.z===this._tileZoom&&k.contains(c.point(m.x,m.y))||(this._tiles[l].current=!1)}if(Math.abs(e-this._tileZoom)>1)return void this._setView(a,e);for(var n=g.min.y;n<=g.max.y;n++)for(var o=g.min.x;o<=g.max.x;o++){var p=new c.Point(o,n);if(p.z=this._tileZoom,this._isValidTile(p)){var q=this._tiles[this._tileCoordsToKey(p)];q?q.current=!0:i.push(p)}}if(i.sort(function(a,b){return a.distanceTo(h)-b.distanceTo(h)}),0!==i.length){this._loading||(this._loading=!0,this.fire("loading"));var r=b.createDocumentFragment();for(o=0;o<i.length;o++)this._addTile(i[o],r);this._level.el.appendChild(r)}}}},_isValidTile:function(a){var b=this._map.options.crs;if(!b.infinite){var d=this._globalTileRange;if(!b.wrapLng&&(a.x<d.min.x||a.x>d.max.x)||!b.wrapLat&&(a.y<d.min.y||a.y>d.max.y))return!1}if(!this.options.bounds)return!0;var e=this._tileCoordsToBounds(a);return c.latLngBounds(this.options.bounds).overlaps(e)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToBounds:function(a){var b=this._map,d=this.getTileSize(),e=a.scaleBy(d),f=e.add(d),g=b.unproject(e,a.z),h=b.unproject(f,a.z),i=new c.LatLngBounds(g,h);return this.options.noWrap||b.wrapLatLngBounds(i),i},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var b=a.split(":"),d=new c.Point(+b[0],+b[1]);return d.z=+b[2],d},_removeTile:function(a){var b=this._tiles[a];b&&(c.DomUtil.remove(b.el),delete this._tiles[a],this.fire("tileunload",{tile:b.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){c.DomUtil.addClass(a,"leaflet-tile");var b=this.getTileSize();a.style.width=b.x+"px",a.style.height=b.y+"px",a.onselectstart=c.Util.falseFn,a.onmousemove=c.Util.falseFn,c.Browser.ielt9&&this.options.opacity<1&&c.DomUtil.setOpacity(a,this.options.opacity),c.Browser.android&&!c.Browser.android23&&(a.style.WebkitBackfaceVisibility="hidden")},_addTile:function(a,b){var d=this._getTilePos(a),e=this._tileCoordsToKey(a),f=this.createTile(this._wrapCoords(a),c.bind(this._tileReady,this,a));this._initTile(f),this.createTile.length<2&&c.Util.requestAnimFrame(c.bind(this._tileReady,this,a,null,f)),c.DomUtil.setPosition(f,d),this._tiles[e]={el:f,coords:a,current:!0},b.appendChild(f),this.fire("tileloadstart",{tile:f,coords:a})},_tileReady:function(a,b,d){if(this._map){b&&this.fire("tileerror",{error:b,tile:d,coords:a});var e=this._tileCoordsToKey(a);d=this._tiles[e],d&&(d.loaded=+new Date,this._map._fadeAnimated?(c.DomUtil.setOpacity(d.el,0),c.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=c.Util.requestAnimFrame(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),b||(c.DomUtil.addClass(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),c.Browser.ielt9||!this._map._fadeAnimated?c.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(c.bind(this._pruneTiles,this),250)))}},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var b=new c.Point(this._wrapX?c.Util.wrapNum(a.x,this._wrapX):a.x,this._wrapY?c.Util.wrapNum(a.y,this._wrapY):a.y);return b.z=a.z,b},_pxBoundsToTileRange:function(a){var b=this.getTileSize();return new c.Bounds(a.min.unscaleBy(b).floor(),a.max.unscaleBy(b).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}}),c.gridLayer=function(a){return new c.GridLayer(a)},c.TileLayer=c.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,minNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(a,b){this._url=a,b=c.setOptions(this,b),b.detectRetina&&c.Browser.retina&&b.maxZoom>0&&(b.tileSize=Math.floor(b.tileSize/2),b.zoomReverse?(b.zoomOffset--,b.minZoom++):(b.zoomOffset++,b.maxZoom--),b.minZoom=Math.max(0,b.minZoom)),"string"==typeof b.subdomains&&(b.subdomains=b.subdomains.split("")),c.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(a,b){return this._url=a,b||this.redraw(),this},createTile:function(a,d){var e=b.createElement("img");return c.DomEvent.on(e,"load",c.bind(this._tileOnLoad,this,d,e)),c.DomEvent.on(e,"error",c.bind(this._tileOnError,this,d,e)),this.options.crossOrigin&&(e.crossOrigin=""),e.alt="",e.setAttribute("role","presentation"),e.src=this.getTileUrl(a),e},getTileUrl:function(a){var b={r:c.Browser.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-a.y;this.options.tms&&(b.y=d),b["-y"]=d}return c.Util.template(this._url,c.extend(b,this.options))},_tileOnLoad:function(a,b){c.Browser.ielt9?setTimeout(c.bind(a,this,null,b),0):a(null,b)},_tileOnError:function(a,b,c){var d=this.options.errorTileUrl;d&&b.src!==d&&(b.src=d),a(c,b)},getTileSize:function(){var a=this._map,b=c.GridLayer.prototype.getTileSize.call(this),d=this._tileZoom+this.options.zoomOffset,e=this.options.minNativeZoom,f=this.options.maxNativeZoom;return null!==e&&d<e?b.divideBy(a.getZoomScale(e,d)).round():null!==f&&d>f?b.divideBy(a.getZoomScale(f,d)).round():b},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,b=this.options.maxZoom,c=this.options.zoomReverse,d=this.options.zoomOffset,e=this.options.minNativeZoom,f=this.options.maxNativeZoom;return c&&(a=b-a),a+=d,null!==e&&a<e?e:null!==f&&a>f?f:a},_getSubdomain:function(a){var b=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[b]},_abortLoading:function(){var a,b;for(a in this._tiles)this._tiles[a].coords.z!==this._tileZoom&&(b=this._tiles[a].el,b.onload=c.Util.falseFn,b.onerror=c.Util.falseFn,b.complete||(b.src=c.Util.emptyImageUrl,c.DomUtil.remove(b)))}}),c.tileLayer=function(a,b){return new c.TileLayer(a,b)},c.TileLayer.WMS=c.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,b){this._url=a;var d=c.extend({},this.defaultWmsParams);for(var e in b)e in this.options||(d[e]=b[e]);b=c.setOptions(this,b),d.width=d.height=b.tileSize*(b.detectRetina&&c.Browser.retina?2:1),this.wmsParams=d},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,c.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a){var b=this._tileCoordsToBounds(a),d=this._crs.project(b.getNorthWest()),e=this._crs.project(b.getSouthEast()),f=(this._wmsVersion>=1.3&&this._crs===c.CRS.EPSG4326?[e.y,d.x,d.y,e.x]:[d.x,e.y,e.x,d.y]).join(","),g=c.TileLayer.prototype.getTileUrl.call(this,a);return g+c.Util.getParamString(this.wmsParams,g,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+f},setParams:function(a,b){return c.extend(this.wmsParams,a),b||this.redraw(),this}}),c.tileLayer.wms=function(a,b){return new c.TileLayer.WMS(a,b)},c.ImageOverlay=c.Layer.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1},initialize:function(a,b,d){this._url=a,this._bounds=c.latLngBounds(b),c.setOptions(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(c.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){c.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&c.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&c.DomUtil.toBack(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},
setBounds:function(a){return this._bounds=a,this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._image=c.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));a.onselectstart=c.Util.falseFn,a.onmousemove=c.Util.falseFn,a.onload=c.bind(this.fire,this,"load"),this.options.crossOrigin&&(a.crossOrigin=""),a.src=this._url,a.alt=this.options.alt},_animateZoom:function(a){var b=this._map.getZoomScale(a.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;c.DomUtil.setTransform(this._image,d,b)},_reset:function(){var a=this._image,b=new c.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=b.getSize();c.DomUtil.setPosition(a,b.min),a.style.width=d.x+"px",a.style.height=d.y+"px"},_updateOpacity:function(){c.DomUtil.setOpacity(this._image,this.options.opacity)}}),c.imageOverlay=function(a,b,d){return new c.ImageOverlay(a,b,d)},c.Icon=c.Class.extend({initialize:function(a){c.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,b){var c=this._getIconUrl(a);if(!c){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(c,b&&"IMG"===b.tagName?b:null);return this._setIconStyles(d,a),d},_setIconStyles:function(a,b){var d=this.options,e=d[b+"Size"];"number"==typeof e&&(e=[e,e]);var f=c.point(e),g=c.point("shadow"===b&&d.shadowAnchor||d.iconAnchor||f&&f.divideBy(2,!0));a.className="leaflet-marker-"+b+" "+(d.className||""),g&&(a.style.marginLeft=-g.x+"px",a.style.marginTop=-g.y+"px"),f&&(a.style.width=f.x+"px",a.style.height=f.y+"px")},_createImg:function(a,c){return c=c||b.createElement("img"),c.src=a,c},_getIconUrl:function(a){return c.Browser.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}}),c.icon=function(a){return new c.Icon(a)},c.Icon.Default=c.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return c.Icon.Default.imagePath||(c.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||c.Icon.Default.imagePath)+c.Icon.prototype._getIconUrl.call(this,a)},_detectIconPath:function(){var a=c.DomUtil.create("div","leaflet-default-icon-path",b.body),d=c.DomUtil.getStyle(a,"background-image")||c.DomUtil.getStyle(a,"backgroundImage");return b.body.removeChild(a),0===d.indexOf("url")?d.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}}),c.Marker=c.Layer.extend({options:{icon:new c.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(a,b){c.setOptions(this,b),this._latlng=c.latLng(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var b=this._latlng;return this._latlng=c.latLng(a),this.update(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,b="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=a.icon.createIcon(this._icon),e=!1;d!==this._icon&&(this._icon&&this._removeIcon(),e=!0,a.title&&(d.title=a.title),a.alt&&(d.alt=a.alt)),c.DomUtil.addClass(d,b),a.keyboard&&(d.tabIndex="0"),this._icon=d,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var f=a.icon.createShadow(this._shadow),g=!1;f!==this._shadow&&(this._removeShadow(),g=!0),f&&(c.DomUtil.addClass(f,b),f.alt=""),this._shadow=f,a.opacity<1&&this._updateOpacity(),e&&this.getPane().appendChild(this._icon),this._initInteraction(),f&&g&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),c.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&c.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(a){c.DomUtil.setPosition(this._icon,a),this._shadow&&c.DomUtil.setPosition(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.interactive&&(c.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),c.Handler.MarkerDrag)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new c.Handler.MarkerDrag(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;c.DomUtil.setOpacity(this._icon,a),this._shadow&&c.DomUtil.setOpacity(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),c.marker=function(a,b){return new c.Marker(a,b)},c.DivIcon=c.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var d=a&&"DIV"===a.tagName?a:b.createElement("div"),e=this.options;if(d.innerHTML=e.html!==!1?e.html:"",e.bgPos){var f=c.point(e.bgPos);d.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}}),c.divIcon=function(a){return new c.DivIcon(a)},c.DivOverlay=c.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(a,b){c.setOptions(this,a),this._source=b},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&c.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&c.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(a){a._fadeAnimated?(c.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(c.bind(c.DomUtil.remove,c.DomUtil,this._container),200)):c.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=c.latLng(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&c.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&c.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var a=this._contentNode,b="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof b)a.innerHTML=b;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(b)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=c.point(this.options.offset),d=this._getAnchor();this._zoomAnimated?c.DomUtil.setPosition(this._container,a.add(d)):b=b.add(a).add(d);var e=this._containerBottom=-b.y,f=this._containerLeft=-Math.round(this._containerWidth/2)+b.x;this._container.style.bottom=e+"px",this._container.style.left=f+"px"}},_getAnchor:function(){return[0,0]}}),c.Popup=c.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(a){return a.openPopup(this),this},onAdd:function(a){c.DivOverlay.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof c.Path||this._source.on("preclick",c.DomEvent.stopPropagation))},onRemove:function(a){c.DivOverlay.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof c.Path||this._source.off("preclick",c.DomEvent.stopPropagation))},getEvents:function(){var a=c.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a="leaflet-popup",b=this._container=c.DomUtil.create("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var d=this._closeButton=c.DomUtil.create("a",a+"-close-button",b);d.href="#close",d.innerHTML="&#215;",c.DomEvent.on(d,"click",this._onCloseButtonClick,this)}var e=this._wrapper=c.DomUtil.create("div",a+"-content-wrapper",b);this._contentNode=c.DomUtil.create("div",a+"-content",e),c.DomEvent.disableClickPropagation(e).disableScrollPropagation(this._contentNode).on(e,"contextmenu",c.DomEvent.stopPropagation),this._tipContainer=c.DomUtil.create("div",a+"-tip-container",b),this._tip=c.DomUtil.create("div",a+"-tip",this._tipContainer)},_updateLayout:function(){var a=this._contentNode,b=a.style;b.width="",b.whiteSpace="nowrap";var d=a.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),b.width=d+1+"px",b.whiteSpace="",b.height="";var e=a.offsetHeight,f=this.options.maxHeight;f&&e>f?(b.height=f+"px",c.DomUtil.addClass(a,"leaflet-popup-scrolled")):c.DomUtil.removeClass(a,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),d=this._getAnchor();c.DomUtil.setPosition(this._container,b.add(d))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var a=this._map,b=parseInt(c.DomUtil.getStyle(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+b,e=this._containerWidth,f=new c.Point(this._containerLeft,-d-this._containerBottom);f._add(c.DomUtil.getPosition(this._container));var g=a.layerPointToContainerPoint(f),h=c.point(this.options.autoPanPadding),i=c.point(this.options.autoPanPaddingTopLeft||h),j=c.point(this.options.autoPanPaddingBottomRight||h),k=a.getSize(),l=0,m=0;g.x+e+j.x>k.x&&(l=g.x+e-k.x+j.x),g.x-l-i.x<0&&(l=g.x-i.x),g.y+d+j.y>k.y&&(m=g.y+d-k.y+j.y),g.y-m-i.y<0&&(m=g.y-i.y),(l||m)&&a.fire("autopanstart").panBy([l,m])}},_onCloseButtonClick:function(a){this._close(),c.DomEvent.stop(a)},_getAnchor:function(){return c.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),c.popup=function(a,b){return new c.Popup(a,b)},c.Map.mergeOptions({closePopupOnClick:!0}),c.Map.include({openPopup:function(a,b,d){return a instanceof c.Popup||(a=new c.Popup(d).setContent(a)),b&&a.setLatLng(b),this.hasLayer(a)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=a,this.addLayer(a))},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),a&&this.removeLayer(a),this}}),c.Layer.include({bindPopup:function(a,b){return a instanceof c.Popup?(c.setOptions(a,b),this._popup=a,a._source=this):(this._popup&&!b||(this._popup=new c.Popup(b,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a,b){if(a instanceof c.Layer||(b=a,a=this),a instanceof c.FeatureGroup)for(var d in this._layers){a=this._layers[d];break}return b||(b=a.getCenter?a.getCenter():a.getLatLng()),this._popup&&this._map&&(this._popup._source=a,this._popup.update(),this._map.openPopup(this._popup,b)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(a){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(a)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){var b=a.layer||a.target;if(this._popup&&this._map){if(c.DomEvent.stop(a),b instanceof c.Path)return void this.openPopup(a.layer||a.target,a.latlng);this._map.hasLayer(this._popup)&&this._popup._source===b?this.closePopup():this.openPopup(b,a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)}}),c.Tooltip=c.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(a){c.DivOverlay.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(a){c.DivOverlay.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var a=c.DivOverlay.prototype.getEvents.call(this);return c.Browser.touch&&!this.options.permanent&&(a.preclick=this._close),a},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var a="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=c.DomUtil.create("div",a)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var b=this._map,d=this._container,e=b.latLngToContainerPoint(b.getCenter()),f=b.layerPointToContainerPoint(a),g=this.options.direction,h=d.offsetWidth,i=d.offsetHeight,j=c.point(this.options.offset),k=this._getAnchor();"top"===g?a=a.add(c.point(-h/2+j.x,-i+j.y+k.y,!0)):"bottom"===g?a=a.subtract(c.point(h/2-j.x,-j.y,!0)):"center"===g?a=a.subtract(c.point(h/2+j.x,i/2-k.y+j.y,!0)):"right"===g||"auto"===g&&f.x<e.x?(g="right",a=a.add(c.point(j.x+k.x,k.y-i/2+j.y,!0))):(g="left",a=a.subtract(c.point(h+k.x-j.x,i/2-k.y-j.y,!0))),c.DomUtil.removeClass(d,"leaflet-tooltip-right"),c.DomUtil.removeClass(d,"leaflet-tooltip-left"),c.DomUtil.removeClass(d,"leaflet-tooltip-top"),c.DomUtil.removeClass(d,"leaflet-tooltip-bottom"),c.DomUtil.addClass(d,"leaflet-tooltip-"+g),c.DomUtil.setPosition(d,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&c.DomUtil.setOpacity(this._container,a)},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(b)},_getAnchor:function(){return c.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),c.tooltip=function(a,b){return new c.Tooltip(a,b)},c.Map.include({openTooltip:function(a,b,d){return a instanceof c.Tooltip||(a=new c.Tooltip(d).setContent(a)),b&&a.setLatLng(b),this.hasLayer(a)?this:this.addLayer(a)},closeTooltip:function(a){return a&&this.removeLayer(a),this}}),c.Layer.include({bindTooltip:function(a,b){return a instanceof c.Tooltip?(c.setOptions(a,b),this._tooltip=a,a._source=this):(this._tooltip&&!b||(this._tooltip=c.tooltip(b,this)),this._tooltip.setContent(a)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(a||!this._tooltipHandlersAdded){var b=a?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),c.Browser.touch&&(d.click=this._openTooltip)),this[b](d),this._tooltipHandlersAdded=!a}},openTooltip:function(a,b){if(a instanceof c.Layer||(b=a,a=this),a instanceof c.FeatureGroup)for(var d in this._layers){a=this._layers[d];break}return b||(b=a.getCenter?a.getCenter():a.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=a,this._tooltip.update(),this._map.openTooltip(this._tooltip,b),this._tooltip.options.interactive&&this._tooltip._container&&(c.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(c.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(a){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(a)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_openTooltip:function(a){var b=a.layer||a.target;this._tooltip&&this._map&&this.openTooltip(b,this._tooltip.options.sticky?a.latlng:void 0)},_moveTooltip:function(a){var b,c,d=a.latlng;this._tooltip.options.sticky&&a.originalEvent&&(b=this._map.mouseEventToContainerPoint(a.originalEvent),c=this._map.containerPointToLayerPoint(b),d=this._map.layerPointToLatLng(c)),this._tooltip.setLatLng(d)}}),c.LayerGroup=c.Layer.extend({initialize:function(a){this._layers={};var b,c;if(a)for(b=0,c=a.length;b<c;b++)this.addLayer(a[b])},addLayer:function(a){var b=this.getLayerId(a);return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var b=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(a){return!!a&&(a in this._layers||this.getLayerId(a)in this._layers)},clearLayers:function(){for(var a in this._layers)this.removeLayer(this._layers[a]);return this},invoke:function(a){var b,c,d=Array.prototype.slice.call(arguments,1);for(b in this._layers)c=this._layers[b],c[a]&&c[a].apply(c,d);return this},onAdd:function(a){for(var b in this._layers)a.addLayer(this._layers[b])},onRemove:function(a){for(var b in this._layers)a.removeLayer(this._layers[b])},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];for(var b in this._layers)a.push(this._layers[b]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return c.stamp(a)}}),c.layerGroup=function(a){return new c.LayerGroup(a)},c.FeatureGroup=c.LayerGroup.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),c.LayerGroup.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),c.LayerGroup.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new c.LatLngBounds;for(var b in this._layers){var d=this._layers[b];a.extend(d.getBounds?d.getBounds():d.getLatLng())}return a}}),c.featureGroup=function(a){return new c.FeatureGroup(a)},c.Renderer=c.Layer.extend({options:{padding:.1},initialize:function(a){c.setOptions(this,a),c.stamp(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&c.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){c.DomUtil.remove(this._container),this.off("update",this._updatePaths,this)},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,b){var d=this._map.getZoomScale(b,this._zoom),e=c.DomUtil.getPosition(this._container),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,b),h=this._map.project(a,b),i=h.subtract(g),j=f.multiplyBy(-d).add(e).add(f).subtract(i);c.Browser.any3d?c.DomUtil.setTransform(this._container,j,d):c.DomUtil.setPosition(this._container,j)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,b=this._map.getSize(),d=this._map.containerPointToLayerPoint(b.multiplyBy(-a)).round();this._bounds=new c.Bounds(d,d.add(b.multiplyBy(1+2*a)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),c.Map.include({getRenderer:function(a){var b=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return b||(b=this._renderer=this.options.preferCanvas&&c.canvas()||c.svg()),this.hasLayer(b)||this.addLayer(b),b},_getPaneRenderer:function(a){if("overlayPane"===a||void 0===a)return!1;var b=this._paneRenderers[a];return void 0===b&&(b=c.SVG&&c.svg({pane:a})||c.Canvas&&c.canvas({pane:a}),this._paneRenderers[a]=b),b}}),c.Path=c.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return c.setOptions(this,a),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(c.Browser.touch?10:0)}}),c.LineUtil={simplify:function(a,b){if(!b||!a.length)return a.slice();var c=b*b;return a=this._reducePoints(a,c),a=this._simplifyDP(a,c)},pointToSegmentDistance:function(a,b,c){return Math.sqrt(this._sqClosestPointOnSegment(a,b,c,!0))},closestPointOnSegment:function(a,b,c){return this._sqClosestPointOnSegment(a,b,c)},_simplifyDP:function(a,b){var c=a.length,d=typeof Uint8Array!=void 0+""?Uint8Array:Array,e=new d(c);e[0]=e[c-1]=1,this._simplifyDPStep(a,e,b,0,c-1);var f,g=[];for(f=0;f<c;f++)e[f]&&g.push(a[f]);return g},_simplifyDPStep:function(a,b,c,d,e){var f,g,h,i=0;for(g=d+1;g<=e-1;g++)(h=this._sqClosestPointOnSegment(a[g],a[d],a[e],!0))>i&&(f=g,i=h);i>c&&(b[f]=1,this._simplifyDPStep(a,b,c,d,f),this._simplifyDPStep(a,b,c,f,e))},_reducePoints:function(a,b){for(var c=[a[0]],d=1,e=0,f=a.length;d<f;d++)this._sqDist(a[d],a[e])>b&&(c.push(a[d]),e=d);return e<f-1&&c.push(a[f-1]),c},clipSegment:function(a,b,c,d,e){var f,g,h,i=d?this._lastCode:this._getBitCode(a,c),j=this._getBitCode(b,c);for(this._lastCode=j;;){if(!(i|j))return[a,b];if(i&j)return!1;f=i||j,g=this._getEdgeIntersection(a,b,f,c,e),h=this._getBitCode(g,c),f===i?(a=g,i=h):(b=g,j=h)}},_getEdgeIntersection:function(a,b,d,e,f){var g,h,i=b.x-a.x,j=b.y-a.y,k=e.min,l=e.max;return 8&d?(g=a.x+i*(l.y-a.y)/j,h=l.y):4&d?(g=a.x+i*(k.y-a.y)/j,h=k.y):2&d?(g=l.x,h=a.y+j*(l.x-a.x)/i):1&d&&(g=k.x,h=a.y+j*(k.x-a.x)/i),new c.Point(g,h,f)},_getBitCode:function(a,b){var c=0;return a.x<b.min.x?c|=1:a.x>b.max.x&&(c|=2),a.y<b.min.y?c|=4:a.y>b.max.y&&(c|=8),c},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},_sqClosestPointOnSegment:function(a,b,d,e){var f,g=b.x,h=b.y,i=d.x-g,j=d.y-h,k=i*i+j*j;return k>0&&(f=((a.x-g)*i+(a.y-h)*j)/k,f>1?(g=d.x,h=d.y):f>0&&(g+=i*f,h+=j*f)),i=a.x-g,j=a.y-h,e?i*i+j*j:new c.Point(g,h)}},c.Polyline=c.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,b){c.setOptions(this,b),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var b,d,e=1/0,f=null,g=c.LineUtil._sqClosestPointOnSegment,h=0,i=this._parts.length;h<i;h++)for(var j=this._parts[h],k=1,l=j.length;k<l;k++){b=j[k-1],d=j[k];var m=g(a,b,d,!0);m<e&&(e=m,f=g(a,b,d))}return f&&(f.distance=Math.sqrt(e)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var a,b,c,d,e,f,g,h=this._rings[0],i=h.length;if(!i)return null;for(a=0,b=0;a<i-1;a++)b+=h[a].distanceTo(h[a+1])/2;if(0===b)return this._map.layerPointToLatLng(h[0]);for(a=0,d=0;a<i-1;a++)if(e=h[a],f=h[a+1],c=e.distanceTo(f),(d+=c)>b)return g=(d-b)/c,this._map.layerPointToLatLng([f.x-g*(f.x-e.x),f.y-g*(f.y-e.y)])},getBounds:function(){return this._bounds},addLatLng:function(a,b){return b=b||this._defaultShape(),a=c.latLng(a),b.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new c.LatLngBounds,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return c.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var b=[],d=c.Polyline._flat(a),e=0,f=a.length;e<f;e++)d?(b[e]=c.latLng(a[e]),this._bounds.extend(b[e])):b[e]=this._convertLatLngs(a[e]);return b},_project:function(){var a=new c.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a);var b=this._clickTolerance(),d=new c.Point(b,b);this._bounds.isValid()&&a.isValid()&&(a.min._subtract(d),a.max._add(d),this._pxBounds=a)},_projectLatlngs:function(a,b,d){var e,f,g=a[0]instanceof c.LatLng,h=a.length;if(g){for(f=[],e=0;e<h;e++)f[e]=this._map.latLngToLayerPoint(a[e]),d.extend(f[e]);b.push(f)}else for(e=0;e<h;e++)this._projectLatlngs(a[e],b,d)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(a)){if(this.options.noClip)return void(this._parts=this._rings);var b,d,e,f,g,h,i,j=this._parts;for(b=0,e=0,f=this._rings.length;b<f;b++)for(i=this._rings[b],d=0,g=i.length;d<g-1;d++)(h=c.LineUtil.clipSegment(i[d],i[d+1],a,d,!0))&&(j[e]=j[e]||[],j[e].push(h[0]),h[1]===i[d+1]&&d!==g-2||(j[e].push(h[1]),e++))}},_simplifyPoints:function(){for(var a=this._parts,b=this.options.smoothFactor,d=0,e=a.length;d<e;d++)a[d]=c.LineUtil.simplify(a[d],b)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),c.polyline=function(a,b){return new c.Polyline(a,b)},c.Polyline._flat=function(a){return!c.Util.isArray(a[0])||"object"!=typeof a[0][0]&&void 0!==a[0][0]},c.PolyUtil={},c.PolyUtil.clipPolygon=function(a,b,d){var e,f,g,h,i,j,k,l,m,n=[1,4,2,8],o=c.LineUtil;for(f=0,k=a.length;f<k;f++)a[f]._code=o._getBitCode(a[f],b);for(h=0;h<4;h++){for(l=n[h],e=[],f=0,k=a.length,g=k-1;f<k;g=f++)i=a[f],j=a[g],i._code&l?j._code&l||(m=o._getEdgeIntersection(j,i,l,b,d),m._code=o._getBitCode(m,b),e.push(m)):(j._code&l&&(m=o._getEdgeIntersection(j,i,l,b,d),m._code=o._getBitCode(m,b),e.push(m)),e.push(i));a=e}return a},c.Polygon=c.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var a,b,c,d,e,f,g,h,i,j=this._rings[0],k=j.length;if(!k)return null;for(f=g=h=0,a=0,b=k-1;a<k;b=a++)c=j[a],d=j[b],e=c.y*d.x-d.y*c.x,g+=(c.x+d.x)*e,h+=(c.y+d.y)*e,f+=3*e;return i=0===f?j[0]:[g/f,h/f],this._map.layerPointToLatLng(i)},_convertLatLngs:function(a){var b=c.Polyline.prototype._convertLatLngs.call(this,a),d=b.length;return d>=2&&b[0]instanceof c.LatLng&&b[0].equals(b[d-1])&&b.pop(),b},_setLatLngs:function(a){c.Polyline.prototype._setLatLngs.call(this,a),c.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return c.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,b=this.options.weight,d=new c.Point(b,b);if(a=new c.Bounds(a.min.subtract(d),a.max.add(d)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(a)){if(this.options.noClip)return void(this._parts=this._rings);for(var e,f=0,g=this._rings.length;f<g;f++)e=c.PolyUtil.clipPolygon(this._rings[f],a,!0),e.length&&this._parts.push(e)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),c.polygon=function(a,b){return new c.Polygon(a,b)},c.Rectangle=c.Polygon.extend({initialize:function(a,b){c.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=c.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}}),c.rectangle=function(a,b){return new c.Rectangle(a,b)},c.CircleMarker=c.Path.extend({options:{fill:!0,radius:10},initialize:function(a,b){c.setOptions(this,b),this._latlng=c.latLng(a),this._radius=this.options.radius},setLatLng:function(a){return this._latlng=c.latLng(a),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var b=a&&a.radius||this._radius;return c.Path.prototype.setStyle.call(this,a),this.setRadius(b),this},_project:function(){
this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,b=this._radiusY||a,d=this._clickTolerance(),e=[a+d,b+d];this._pxBounds=new c.Bounds(this._point.subtract(e),this._point.add(e))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),c.circleMarker=function(a,b){return new c.CircleMarker(a,b)},c.Circle=c.CircleMarker.extend({initialize:function(a,b,d){if("number"==typeof b&&(b=c.extend({},d,{radius:b})),c.setOptions(this,b),this._latlng=c.latLng(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new c.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:c.Path.prototype.setStyle,_project:function(){var a=this._latlng.lng,b=this._latlng.lat,d=this._map,e=d.options.crs;if(e.distance===c.CRS.Earth.distance){var f=Math.PI/180,g=this._mRadius/c.CRS.Earth.R/f,h=d.project([b+g,a]),i=d.project([b-g,a]),j=h.add(i).divideBy(2),k=d.unproject(j).lat,l=Math.acos((Math.cos(g*f)-Math.sin(b*f)*Math.sin(k*f))/(Math.cos(b*f)*Math.cos(k*f)))/f;(isNaN(l)||0===l)&&(l=g/Math.cos(Math.PI/180*b)),this._point=j.subtract(d.getPixelOrigin()),this._radius=isNaN(l)?0:Math.max(Math.round(j.x-d.project([k,a-l]).x),1),this._radiusY=Math.max(Math.round(j.y-h.y),1)}else{var m=e.unproject(e.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(m).x}this._updateBounds()}}),c.circle=function(a,b,d){return new c.Circle(a,b,d)},c.SVG=c.Renderer.extend({getEvents:function(){var a=c.Renderer.prototype.getEvents.call(this);return a.zoomstart=this._onZoomStart,a},_initContainer:function(){this._container=c.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=c.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){c.Renderer.prototype._update.call(this);var a=this._bounds,b=a.getSize(),d=this._container;this._svgSize&&this._svgSize.equals(b)||(this._svgSize=b,d.setAttribute("width",b.x),d.setAttribute("height",b.y)),c.DomUtil.setPosition(d,a.min),d.setAttribute("viewBox",[a.min.x,a.min.y,b.x,b.y].join(" ")),this.fire("update")}},_initPath:function(a){var b=a._path=c.SVG.create("path");a.options.className&&c.DomUtil.addClass(b,a.options.className),a.options.interactive&&c.DomUtil.addClass(b,"leaflet-interactive"),this._updateStyle(a),this._layers[c.stamp(a)]=a},_addPath:function(a){this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){c.DomUtil.remove(a._path),a.removeInteractiveTarget(a._path),delete this._layers[c.stamp(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var b=a._path,c=a.options;b&&(c.stroke?(b.setAttribute("stroke",c.color),b.setAttribute("stroke-opacity",c.opacity),b.setAttribute("stroke-width",c.weight),b.setAttribute("stroke-linecap",c.lineCap),b.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?b.setAttribute("stroke-dasharray",c.dashArray):b.removeAttribute("stroke-dasharray"),c.dashOffset?b.setAttribute("stroke-dashoffset",c.dashOffset):b.removeAttribute("stroke-dashoffset")):b.setAttribute("stroke","none"),c.fill?(b.setAttribute("fill",c.fillColor||c.color),b.setAttribute("fill-opacity",c.fillOpacity),b.setAttribute("fill-rule",c.fillRule||"evenodd")):b.setAttribute("fill","none"))},_updatePoly:function(a,b){this._setPath(a,c.SVG.pointsToPath(a._parts,b))},_updateCircle:function(a){var b=a._point,c=a._radius,d=a._radiusY||c,e="a"+c+","+d+" 0 1,0 ",f=a._empty()?"M0 0":"M"+(b.x-c)+","+b.y+e+2*c+",0 "+e+2*-c+",0 ";this._setPath(a,f)},_setPath:function(a,b){a._path.setAttribute("d",b)},_bringToFront:function(a){c.DomUtil.toFront(a._path)},_bringToBack:function(a){c.DomUtil.toBack(a._path)}}),c.extend(c.SVG,{create:function(a){return b.createElementNS("http://www.w3.org/2000/svg",a)},pointsToPath:function(a,b){var d,e,f,g,h,i,j="";for(d=0,f=a.length;d<f;d++){for(h=a[d],e=0,g=h.length;e<g;e++)i=h[e],j+=(e?"L":"M")+i.x+" "+i.y;j+=b?c.Browser.svg?"z":"x":""}return j||"M0 0"}}),c.Browser.svg=!(!b.createElementNS||!c.SVG.create("svg").createSVGRect),c.svg=function(a){return c.Browser.svg||c.Browser.vml?new c.SVG(a):null},c.Browser.vml=!c.Browser.svg&&function(){try{var a=b.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&"object"==typeof c.adj}catch(a){return!1}}(),c.SVG.include(c.Browser.vml?{_initContainer:function(){this._container=c.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(c.Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var b=a._container=c.SVG.create("shape");c.DomUtil.addClass(b,"leaflet-vml-shape "+(this.options.className||"")),b.coordsize="1 1",a._path=c.SVG.create("path"),b.appendChild(a._path),this._updateStyle(a),this._layers[c.stamp(a)]=a},_addPath:function(a){var b=a._container;this._container.appendChild(b),a.options.interactive&&a.addInteractiveTarget(b)},_removePath:function(a){var b=a._container;c.DomUtil.remove(b),a.removeInteractiveTarget(b),delete this._layers[c.stamp(a)]},_updateStyle:function(a){var b=a._stroke,d=a._fill,e=a.options,f=a._container;f.stroked=!!e.stroke,f.filled=!!e.fill,e.stroke?(b||(b=a._stroke=c.SVG.create("stroke")),f.appendChild(b),b.weight=e.weight+"px",b.color=e.color,b.opacity=e.opacity,e.dashArray?b.dashStyle=c.Util.isArray(e.dashArray)?e.dashArray.join(" "):e.dashArray.replace(/( *, *)/g," "):b.dashStyle="",b.endcap=e.lineCap.replace("butt","flat"),b.joinstyle=e.lineJoin):b&&(f.removeChild(b),a._stroke=null),e.fill?(d||(d=a._fill=c.SVG.create("fill")),f.appendChild(d),d.color=e.fillColor||e.color,d.opacity=e.fillOpacity):d&&(f.removeChild(d),a._fill=null)},_updateCircle:function(a){var b=a._point.round(),c=Math.round(a._radius),d=Math.round(a._radiusY||c);this._setPath(a,a._empty()?"M0 0":"AL "+b.x+","+b.y+" "+c+","+d+" 0,23592600")},_setPath:function(a,b){a._path.v=b},_bringToFront:function(a){c.DomUtil.toFront(a._container)},_bringToBack:function(a){c.DomUtil.toBack(a._container)}}:{}),c.Browser.vml&&(c.SVG.create=function(){try{return b.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return b.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),c.Canvas=c.Renderer.extend({getEvents:function(){var a=c.Renderer.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){c.Renderer.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=b.createElement("canvas");c.DomEvent.on(a,"mousemove",c.Util.throttle(this._onMouseMove,32,this),this).on(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(a,"mouseout",this._handleMouseOut,this),this._ctx=a.getContext("2d")},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var b in this._layers)a=this._layers[b],a._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},c.Renderer.prototype._update.call(this);var a=this._bounds,b=this._container,d=a.getSize(),e=c.Browser.retina?2:1;c.DomUtil.setPosition(b,a.min),b.width=e*d.x,b.height=e*d.y,b.style.width=d.x+"px",b.style.height=d.y+"px",c.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){c.Renderer.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[c.stamp(a)]=a;var b=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=b),this._drawLast=b,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var b=a._order,d=b.next,e=b.prev;d?d.prev=e:this._drawLast=e,e?e.next=d:this._drawFirst=d,delete a._order,delete this._layers[c.stamp(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(a.options.dashArray){var b,c=a.options.dashArray.split(","),d=[];for(b=0;b<c.length;b++)d.push(Number(c[b]));a.options._dashArray=d}},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||c.Util.requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(a){var b=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new c.Bounds,this._redrawBounds.extend(a._pxBounds.min.subtract([b,b])),this._redrawBounds.extend(a._pxBounds.max.add([b,b]))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var b=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,b.x,b.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var a,b=this._redrawBounds;if(this._ctx.save(),b){var c=b.getSize();this._ctx.beginPath(),this._ctx.rect(b.min.x,b.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)a=d.layer,(!b||a._pxBounds&&a._pxBounds.intersects(b))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,b){if(this._drawing){var c,d,e,f,g=a._parts,h=g.length,i=this._ctx;if(h){for(this._drawnLayers[a._leaflet_id]=a,i.beginPath(),i.setLineDash&&i.setLineDash(a.options&&a.options._dashArray||[]),c=0;c<h;c++){for(d=0,e=g[c].length;d<e;d++)f=g[c][d],i[d?"lineTo":"moveTo"](f.x,f.y);b&&i.closePath()}this._fillStroke(i,a)}}},_updateCircle:function(a){if(this._drawing&&!a._empty()){var b=a._point,c=this._ctx,d=a._radius,e=(a._radiusY||d)/d;this._drawnLayers[a._leaflet_id]=a,1!==e&&(c.save(),c.scale(1,e)),c.beginPath(),c.arc(b.x,b.y/e,d,0,2*Math.PI,!1),1!==e&&c.restore(),this._fillStroke(c,a)}},_fillStroke:function(a,b){var c=b.options;c.fill&&(a.globalAlpha=c.fillOpacity,a.fillStyle=c.fillColor||c.color,a.fill(c.fillRule||"evenodd")),c.stroke&&0!==c.weight&&(a.globalAlpha=c.opacity,a.lineWidth=c.weight,a.strokeStyle=c.color,a.lineCap=c.lineCap,a.lineJoin=c.lineJoin,a.stroke())},_onClick:function(a){for(var b,d,e=this._map.mouseEventToLayerPoint(a),f=this._drawFirst;f;f=f.next)b=f.layer,b.options.interactive&&b._containsPoint(e)&&!this._map._draggableMoved(b)&&(d=b);d&&(c.DomEvent._fakeStop(a),this._fireEvent([d],a))},_onMouseMove:function(a){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var b=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,b)}},_handleMouseOut:function(a){var b=this._hoveredLayer;b&&(c.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([b],a,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(a,b){for(var d,e,f=this._drawFirst;f;f=f.next)d=f.layer,d.options.interactive&&d._containsPoint(b)&&(e=d);e!==this._hoveredLayer&&(this._handleMouseOut(a),e&&(c.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([e],a,"mouseover"),this._hoveredLayer=e)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],a)},_fireEvent:function(a,b,c){this._map._fireDOMEvent(b,c||b.type,a)},_bringToFront:function(a){var b=a._order,c=b.next,d=b.prev;c&&(c.prev=d,d?d.next=c:c&&(this._drawFirst=c),b.prev=this._drawLast,this._drawLast.next=b,b.next=null,this._drawLast=b,this._requestRedraw(a))},_bringToBack:function(a){var b=a._order,c=b.next,d=b.prev;d&&(d.next=c,c?c.prev=d:d&&(this._drawLast=d),b.prev=null,b.next=this._drawFirst,this._drawFirst.prev=b,this._drawFirst=b,this._requestRedraw(a))}}),c.Browser.canvas=function(){return!!b.createElement("canvas").getContext}(),c.canvas=function(a){return c.Browser.canvas?new c.Canvas(a):null},c.Polyline.prototype._containsPoint=function(a,b){var d,e,f,g,h,i,j=this._clickTolerance();if(!this._pxBounds.contains(a))return!1;for(d=0,g=this._parts.length;d<g;d++)for(i=this._parts[d],e=0,h=i.length,f=h-1;e<h;f=e++)if((b||0!==e)&&c.LineUtil.pointToSegmentDistance(a,i[f],i[e])<=j)return!0;return!1},c.Polygon.prototype._containsPoint=function(a){var b,d,e,f,g,h,i,j,k=!1;if(!this._pxBounds.contains(a))return!1;for(f=0,i=this._parts.length;f<i;f++)for(b=this._parts[f],g=0,j=b.length,h=j-1;g<j;h=g++)d=b[g],e=b[h],d.y>a.y!=e.y>a.y&&a.x<(e.x-d.x)*(a.y-d.y)/(e.y-d.y)+d.x&&(k=!k);return k||c.Polyline.prototype._containsPoint.call(this,a,!0)},c.CircleMarker.prototype._containsPoint=function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()},c.GeoJSON=c.FeatureGroup.extend({initialize:function(a,b){c.setOptions(this,b),this._layers={},a&&this.addData(a)},addData:function(a){var b,d,e,f=c.Util.isArray(a)?a:a.features;if(f){for(b=0,d=f.length;b<d;b++)e=f[b],(e.geometries||e.geometry||e.features||e.coordinates)&&this.addData(e);return this}var g=this.options;if(g.filter&&!g.filter(a))return this;var h=c.GeoJSON.geometryToLayer(a,g);return h?(h.feature=c.GeoJSON.asFeature(a),h.defaultOptions=h.options,this.resetStyle(h),g.onEachFeature&&g.onEachFeature(a,h),this.addLayer(h)):this},resetStyle:function(a){return a.options=c.Util.extend({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this},setStyle:function(a){return this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature)),a.setStyle&&a.setStyle(b)}}),c.extend(c.GeoJSON,{geometryToLayer:function(a,b){var d,e,f,g,h="Feature"===a.type?a.geometry:a,i=h?h.coordinates:null,j=[],k=b&&b.pointToLayer,l=b&&b.coordsToLatLng||this.coordsToLatLng;if(!i&&!h)return null;switch(h.type){case"Point":return d=l(i),k?k(a,d):new c.Marker(d);case"MultiPoint":for(f=0,g=i.length;f<g;f++)d=l(i[f]),j.push(k?k(a,d):new c.Marker(d));return new c.FeatureGroup(j);case"LineString":case"MultiLineString":return e=this.coordsToLatLngs(i,"LineString"===h.type?0:1,l),new c.Polyline(e,b);case"Polygon":case"MultiPolygon":return e=this.coordsToLatLngs(i,"Polygon"===h.type?1:2,l),new c.Polygon(e,b);case"GeometryCollection":for(f=0,g=h.geometries.length;f<g;f++){var m=this.geometryToLayer({geometry:h.geometries[f],type:"Feature",properties:a.properties},b);m&&j.push(m)}return new c.FeatureGroup(j);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(a){return new c.LatLng(a[1],a[0],a[2])},coordsToLatLngs:function(a,b,c){for(var d,e=[],f=0,g=a.length;f<g;f++)d=b?this.coordsToLatLngs(a[f],b-1,c):(c||this.coordsToLatLng)(a[f]),e.push(d);return e},latLngToCoords:function(a){return void 0!==a.alt?[a.lng,a.lat,a.alt]:[a.lng,a.lat]},latLngsToCoords:function(a,b,d){for(var e=[],f=0,g=a.length;f<g;f++)e.push(b?c.GeoJSON.latLngsToCoords(a[f],b-1,d):c.GeoJSON.latLngToCoords(a[f]));return!b&&d&&e.push(e[0]),e},getFeature:function(a,b){return a.feature?c.extend({},a.feature,{geometry:b}):c.GeoJSON.asFeature(b)},asFeature:function(a){return"Feature"===a.type||"FeatureCollection"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var f={toGeoJSON:function(){return c.GeoJSON.getFeature(this,{type:"Point",coordinates:c.GeoJSON.latLngToCoords(this.getLatLng())})}};c.Marker.include(f),c.Circle.include(f),c.CircleMarker.include(f),c.Polyline.prototype.toGeoJSON=function(){var a=!c.Polyline._flat(this._latlngs),b=c.GeoJSON.latLngsToCoords(this._latlngs,a?1:0);return c.GeoJSON.getFeature(this,{type:(a?"Multi":"")+"LineString",coordinates:b})},c.Polygon.prototype.toGeoJSON=function(){var a=!c.Polyline._flat(this._latlngs),b=a&&!c.Polyline._flat(this._latlngs[0]),d=c.GeoJSON.latLngsToCoords(this._latlngs,b?2:a?1:0,!0);return a||(d=[d]),c.GeoJSON.getFeature(this,{type:(b?"Multi":"")+"Polygon",coordinates:d})},c.LayerGroup.include({toMultiPoint:function(){var a=[];return this.eachLayer(function(b){a.push(b.toGeoJSON().geometry.coordinates)}),c.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===a)return this.toMultiPoint();var b="GeometryCollection"===a,d=[];return this.eachLayer(function(a){if(a.toGeoJSON){var e=a.toGeoJSON();d.push(b?e.geometry:c.GeoJSON.asFeature(e))}}),b?c.GeoJSON.getFeature(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}}),c.geoJSON=function(a,b){return new c.GeoJSON(a,b)},c.geoJson=c.geoJSON,c.Draggable=c.Evented.extend({options:{clickTolerance:3},statics:{START:c.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(a,b,c){this._element=a,this._dragStartTarget=b||a,this._preventOutline=c},enable:function(){this._enabled||(c.DomEvent.on(this._dragStartTarget,c.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(c.Draggable._dragging===this&&this.finishDrag(),c.DomEvent.off(this._dragStartTarget,c.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(!a._simulated&&this._enabled&&(this._moved=!1,!c.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(c.Draggable._dragging||a.shiftKey||1!==a.which&&1!==a.button&&!a.touches||(c.Draggable._dragging=this,this._preventOutline&&c.DomUtil.preventOutline(this._element),c.DomUtil.disableImageDrag(),c.DomUtil.disableTextSelection(),this._moving)))){this.fire("down");var d=a.touches?a.touches[0]:a;this._startPoint=new c.Point(d.clientX,d.clientY),c.DomEvent.on(b,c.Draggable.MOVE[a.type],this._onMove,this).on(b,c.Draggable.END[a.type],this._onUp,this)}},_onMove:function(d){if(!d._simulated&&this._enabled){if(d.touches&&d.touches.length>1)return void(this._moved=!0);var e=d.touches&&1===d.touches.length?d.touches[0]:d,f=new c.Point(e.clientX,e.clientY),g=f.subtract(this._startPoint);(g.x||g.y)&&(Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(c.DomEvent.preventDefault(d),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=c.DomUtil.getPosition(this._element).subtract(g),c.DomUtil.addClass(b.body,"leaflet-dragging"),this._lastTarget=d.target||d.srcElement,a.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),c.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,c.Util.cancelAnimFrame(this._animRequest),this._lastEvent=d,this._animRequest=c.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),c.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",a)},_onUp:function(a){!a._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){c.DomUtil.removeClass(b.body,"leaflet-dragging"),this._lastTarget&&(c.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var a in c.Draggable.MOVE)c.DomEvent.off(b,c.Draggable.MOVE[a],this._onMove,this).off(b,c.Draggable.END[a],this._onUp,this);c.DomUtil.enableImageDrag(),c.DomUtil.enableTextSelection(),this._moved&&this._moving&&(c.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,c.Draggable._dragging=!1}}),c.Handler=c.Class.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),c.Map.mergeOptions({dragging:!0,inertia:!c.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),c.Map.Drag=c.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new c.Draggable(a._mapPane,a._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}c.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){c.DomUtil.removeClass(this._map._container,"leaflet-grab"),c.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var a=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var b=c.latLngBounds(this._map.options.maxBounds);this._offsetLimit=c.bounds(this._map.latLngToContainerPoint(b.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(b.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var b=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(b),b-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",a).fire("drag",a)},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,b){return a-(a-b)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var a=this._draggable._newPos.subtract(this._draggable._startPos),b=this._offsetLimit;a.x<b.min.x&&(a.x=this._viscousLimit(a.x,b.min.x)),a.y<b.min.y&&(a.y=this._viscousLimit(a.y,b.min.y)),a.x>b.max.x&&(a.x=this._viscousLimit(a.x,b.max.x)),a.y>b.max.y&&(a.y=this._viscousLimit(a.y,b.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,b=Math.round(a/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,e=(d-b+c)%a+b-c,f=(d+b+c)%a-b-c,g=Math.abs(e+c)<Math.abs(f+c)?e:f;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=g},_onDragEnd:function(a){var b=this._map,d=b.options,e=!d.inertia||this._times.length<2;if(b.fire("dragend",a),e)b.fire("moveend");else{var f=this._lastPos.subtract(this._positions[0]),g=(this._lastTime-this._times[0])/1e3,h=d.easeLinearity,i=f.multiplyBy(h/g),j=i.distanceTo([0,0]),k=Math.min(d.inertiaMaxSpeed,j),l=i.multiplyBy(k/j),m=k/(d.inertiaDeceleration*h),n=l.multiplyBy(-m/2).round();n.x||n.y?(n=b._limitOffset(n,b.options.maxBounds),c.Util.requestAnimFrame(function(){b.panBy(n,{duration:m,easeLinearity:h,noMoveStart:!0,animate:!0})})):b.fire("moveend")}}}),c.Map.addInitHook("addHandler","dragging",c.Map.Drag),c.Map.mergeOptions({doubleClickZoom:!0}),c.Map.DoubleClickZoom=c.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var b=this._map,c=b.getZoom(),d=b.options.zoomDelta,e=a.originalEvent.shiftKey?c-d:c+d;"center"===b.options.doubleClickZoom?b.setZoom(e):b.setZoomAround(a.containerPoint,e)}}),c.Map.addInitHook("addHandler","doubleClickZoom",c.Map.DoubleClickZoom),c.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),c.Map.ScrollWheelZoom=c.Handler.extend({addHooks:function(){c.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){c.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var b=c.DomEvent.getWheelDelta(a),d=this._map.options.wheelDebounceTime;this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var e=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c.bind(this._performZoom,this),e),c.DomEvent.stop(a)},_performZoom:function(){var a=this._map,b=a.getZoom(),c=this._map.options.zoomSnap||0;a._stop();var d=this._delta/(4*this._map.options.wheelPxPerZoomLevel),e=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,f=c?Math.ceil(e/c)*c:e,g=a._limitZoom(b+(this._delta>0?f:-f))-b;this._delta=0,this._startTime=null,g&&("center"===a.options.scrollWheelZoom?a.setZoom(b+g):a.setZoomAround(this._lastMousePos,b+g))}}),c.Map.addInitHook("addHandler","scrollWheelZoom",c.Map.ScrollWheelZoom),c.extend(c.DomEvent,{_touchstart:c.Browser.msPointer?"MSPointerDown":c.Browser.pointer?"pointerdown":"touchstart",_touchend:c.Browser.msPointer?"MSPointerUp":c.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(a,b,d){function e(a){var b;if(c.Browser.pointer){if(!c.Browser.edge||"mouse"===a.pointerType)return;b=c.DomEvent._pointersCount}else b=a.touches.length;if(!(b>1)){var d=Date.now(),e=d-(g||d);h=a.touches?a.touches[0]:a,i=e>0&&e<=j,g=d}}function f(a){if(i&&!h.cancelBubble){if(c.Browser.pointer){if(!c.Browser.edge||"mouse"===a.pointerType)return;var d,e,f={};for(e in h)d=h[e],f[e]=d&&d.bind?d.bind(h):d;h=f}h.type="dblclick",b(h),g=null}}var g,h,i=!1,j=250,k="_leaflet_",l=this._touchstart,m=this._touchend;return a[k+l+d]=e,a[k+m+d]=f,a[k+"dblclick"+d]=b,a.addEventListener(l,e,!1),a.addEventListener(m,f,!1),a.addEventListener("dblclick",b,!1),this},removeDoubleTapListener:function(a,b){var d="_leaflet_",e=a[d+this._touchstart+b],f=a[d+this._touchend+b],g=a[d+"dblclick"+b];return a.removeEventListener(this._touchstart,e,!1),a.removeEventListener(this._touchend,f,!1),c.Browser.edge||a.removeEventListener("dblclick",g,!1),this}}),c.extend(c.DomEvent,{POINTER_DOWN:c.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:c.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:c.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:c.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(a,b,c,d){return"touchstart"===b?this._addPointerStart(a,c,d):"touchmove"===b?this._addPointerMove(a,c,d):"touchend"===b&&this._addPointerEnd(a,c,d),this},removePointerListener:function(a,b,c){var d=a["_leaflet_"+b+c];return"touchstart"===b?a.removeEventListener(this.POINTER_DOWN,d,!1):"touchmove"===b?a.removeEventListener(this.POINTER_MOVE,d,!1):"touchend"===b&&(a.removeEventListener(this.POINTER_UP,d,!1),a.removeEventListener(this.POINTER_CANCEL,d,!1)),this},_addPointerStart:function(a,d,e){var f=c.bind(function(a){if("mouse"!==a.pointerType&&a.MSPOINTER_TYPE_MOUSE&&a.pointerType!==a.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(a.target.tagName)<0))return;c.DomEvent.preventDefault(a)}this._handlePointer(a,d)},this);if(a["_leaflet_touchstart"+e]=f,a.addEventListener(this.POINTER_DOWN,f,!1),!this._pointerDocListener){var g=c.bind(this._globalPointerUp,this);b.documentElement.addEventListener(this.POINTER_DOWN,c.bind(this._globalPointerDown,this),!0),b.documentElement.addEventListener(this.POINTER_MOVE,c.bind(this._globalPointerMove,this),!0),b.documentElement.addEventListener(this.POINTER_UP,g,!0),b.documentElement.addEventListener(this.POINTER_CANCEL,g,!0),this._pointerDocListener=!0}},_globalPointerDown:function(a){this._pointers[a.pointerId]=a,this._pointersCount++},_globalPointerMove:function(a){this._pointers[a.pointerId]&&(this._pointers[a.pointerId]=a)},_globalPointerUp:function(a){delete this._pointers[a.pointerId],this._pointersCount--},_handlePointer:function(a,b){a.touches=[];for(var c in this._pointers)a.touches.push(this._pointers[c]);a.changedTouches=[a],b(a)},_addPointerMove:function(a,b,d){var e=c.bind(function(a){(a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&"mouse"!==a.pointerType||0!==a.buttons)&&this._handlePointer(a,b)},this);a["_leaflet_touchmove"+d]=e,a.addEventListener(this.POINTER_MOVE,e,!1)},_addPointerEnd:function(a,b,d){var e=c.bind(function(a){this._handlePointer(a,b)},this);a["_leaflet_touchend"+d]=e,a.addEventListener(this.POINTER_UP,e,!1),a.addEventListener(this.POINTER_CANCEL,e,!1)}}),c.Map.mergeOptions({touchZoom:c.Browser.touch&&!c.Browser.android23,bounceAtZoomLimits:!0}),c.Map.TouchZoom=c.Handler.extend({addHooks:function(){c.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),c.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){c.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),c.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var d=this._map;if(a.touches&&2===a.touches.length&&!d._animatingZoom&&!this._zooming){var e=d.mouseEventToContainerPoint(a.touches[0]),f=d.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),"center"!==d.options.touchZoom&&(this._pinchStartLatLng=d.containerPointToLatLng(e.add(f)._divideBy(2))),this._startDist=e.distanceTo(f),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),c.DomEvent.on(b,"touchmove",this._onTouchMove,this).on(b,"touchend",this._onTouchEnd,this),c.DomEvent.preventDefault(a)}},_onTouchMove:function(a){if(a.touches&&2===a.touches.length&&this._zooming){var b=this._map,d=b.mouseEventToContainerPoint(a.touches[0]),e=b.mouseEventToContainerPoint(a.touches[1]),f=d.distanceTo(e)/this._startDist;if(this._zoom=b.getScaleZoom(f,this._startZoom),!b.options.bounceAtZoomLimits&&(this._zoom<b.getMinZoom()&&f<1||this._zoom>b.getMaxZoom()&&f>1)&&(this._zoom=b._limitZoom(this._zoom)),"center"===b.options.touchZoom){if(this._center=this._startLatLng,1===f)return}else{var g=d._add(e)._divideBy(2)._subtract(this._centerPoint);if(1===f&&0===g.x&&0===g.y)return;this._center=b.unproject(b.project(this._pinchStartLatLng,this._zoom).subtract(g),this._zoom)}this._moved||(b._moveStart(!0),this._moved=!0),c.Util.cancelAnimFrame(this._animRequest);var h=c.bind(b._move,b,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=c.Util.requestAnimFrame(h,this,!0),c.DomEvent.preventDefault(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);this._zooming=!1,c.Util.cancelAnimFrame(this._animRequest),c.DomEvent.off(b,"touchmove",this._onTouchMove).off(b,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}}),c.Map.addInitHook("addHandler","touchZoom",c.Map.TouchZoom),c.Map.mergeOptions({tap:!0,tapTolerance:15}),c.Map.Tap=c.Handler.extend({addHooks:function(){c.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){c.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){
if(c.DomEvent.preventDefault(a),this._fireClick=!0,a.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var d=a.touches[0],e=d.target;this._startPos=this._newPos=new c.Point(d.clientX,d.clientY),e.tagName&&"a"===e.tagName.toLowerCase()&&c.DomUtil.addClass(e,"leaflet-active"),this._holdTimeout=setTimeout(c.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",d))},this),1e3),this._simulateEvent("mousedown",d),c.DomEvent.on(b,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),c.DomEvent.off(b,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&a&&a.changedTouches){var d=a.changedTouches[0],e=d.target;e&&e.tagName&&"a"===e.tagName.toLowerCase()&&c.DomUtil.removeClass(e,"leaflet-active"),this._simulateEvent("mouseup",d),this._isTapValid()&&this._simulateEvent("click",d)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){var b=a.touches[0];this._newPos=new c.Point(b.clientX,b.clientY),this._simulateEvent("mousemove",b)},_simulateEvent:function(c,d){var e=b.createEvent("MouseEvents");e._simulated=!0,d.target._simulatedClick=!0,e.initMouseEvent(c,!0,!0,a,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),d.target.dispatchEvent(e)}}),c.Browser.touch&&!c.Browser.pointer&&c.Map.addInitHook("addHandler","tap",c.Map.Tap),c.Map.mergeOptions({boxZoom:!0}),c.Map.BoxZoom=c.Handler.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane},addHooks:function(){c.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){c.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(a){if(!a.shiftKey||1!==a.which&&1!==a.button)return!1;this._resetState(),c.DomUtil.disableTextSelection(),c.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(a),c.DomEvent.on(b,{contextmenu:c.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=c.DomUtil.create("div","leaflet-zoom-box",this._container),c.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var b=new c.Bounds(this._point,this._startPoint),d=b.getSize();c.DomUtil.setPosition(this._box,b.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(c.DomUtil.remove(this._box),c.DomUtil.removeClass(this._container,"leaflet-crosshair")),c.DomUtil.enableTextSelection(),c.DomUtil.enableImageDrag(),c.DomEvent.off(b,{contextmenu:c.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if((1===a.which||1===a.button)&&(this._finish(),this._moved)){setTimeout(c.bind(this._resetState,this),0);var b=new c.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(b).fire("boxzoomend",{boxZoomBounds:b})}},_onKeyDown:function(a){27===a.keyCode&&this._finish()}}),c.Map.addInitHook("addHandler","boxZoom",c.Map.BoxZoom),c.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),c.Map.Keyboard=c.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),c.DomEvent.on(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),c.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=b.body,d=b.documentElement,e=c.scrollTop||d.scrollTop,f=c.scrollLeft||d.scrollLeft;this._map._container.focus(),a.scrollTo(f,e)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var b,c,d=this._panKeys={},e=this.keyCodes;for(b=0,c=e.left.length;b<c;b++)d[e.left[b]]=[-1*a,0];for(b=0,c=e.right.length;b<c;b++)d[e.right[b]]=[a,0];for(b=0,c=e.down.length;b<c;b++)d[e.down[b]]=[0,a];for(b=0,c=e.up.length;b<c;b++)d[e.up[b]]=[0,-1*a]},_setZoomDelta:function(a){var b,c,d=this._zoomKeys={},e=this.keyCodes;for(b=0,c=e.zoomIn.length;b<c;b++)d[e.zoomIn[b]]=a;for(b=0,c=e.zoomOut.length;b<c;b++)d[e.zoomOut[b]]=-a},_addHooks:function(){c.DomEvent.on(b,"keydown",this._onKeyDown,this)},_removeHooks:function(){c.DomEvent.off(b,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var b,d=a.keyCode,e=this._map;if(d in this._panKeys){if(e._panAnim&&e._panAnim._inProgress)return;b=this._panKeys[d],a.shiftKey&&(b=c.point(b).multiplyBy(3)),e.panBy(b),e.options.maxBounds&&e.panInsideBounds(e.options.maxBounds)}else if(d in this._zoomKeys)e.setZoom(e.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[d]);else{if(27!==d)return;e.closePopup()}c.DomEvent.stop(a)}}}),c.Map.addInitHook("addHandler","keyboard",c.Map.Keyboard),c.Handler.MarkerDrag=c.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new c.Draggable(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),c.DomUtil.addClass(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&c.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(a){var b=this._marker,d=b._shadow,e=c.DomUtil.getPosition(b._icon),f=b._map.layerPointToLatLng(e);d&&c.DomUtil.setPosition(d,e),b._latlng=f,a.latlng=f,a.oldLatLng=this._oldLatLng,b.fire("move",a).fire("drag",a)},_onDragEnd:function(a){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),c.Control=c.Class.extend({options:{position:"topright"},initialize:function(a){c.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var b=this._map;return b&&b.removeControl(this),this.options.position=a,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var b=this._container=this.onAdd(a),d=this.getPosition(),e=a._controlCorners[d];return c.DomUtil.addClass(b,"leaflet-control"),d.indexOf("bottom")!==-1?e.insertBefore(b,e.firstChild):e.appendChild(b),this},remove:function(){return this._map?(c.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),c.control=function(a){return new c.Control(a)},c.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){function a(a,f){var g=d+a+" "+d+f;b[a+f]=c.DomUtil.create("div",g,e)}var b=this._controlCorners={},d="leaflet-",e=this._controlContainer=c.DomUtil.create("div",d+"control-container",this._container);a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){c.DomUtil.remove(this._controlContainer)}}),c.Control.Zoom=c.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(a){var b="leaflet-control-zoom",d=c.DomUtil.create("div",b+" leaflet-bar"),e=this.options;return this._zoomInButton=this._createButton(e.zoomInText,e.zoomInTitle,b+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(e.zoomOutText,e.zoomOutTitle,b+"-out",d,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,b,d,e,f){var g=c.DomUtil.create("a",d,e);return g.innerHTML=a,g.href="#",g.title=b,g.setAttribute("role","button"),g.setAttribute("aria-label",b),c.DomEvent.on(g,"mousedown dblclick",c.DomEvent.stopPropagation).on(g,"click",c.DomEvent.stop).on(g,"click",f,this).on(g,"click",this._refocusOnMap,this),g},_updateDisabled:function(){var a=this._map,b="leaflet-disabled";c.DomUtil.removeClass(this._zoomInButton,b),c.DomUtil.removeClass(this._zoomOutButton,b),(this._disabled||a._zoom===a.getMinZoom())&&c.DomUtil.addClass(this._zoomOutButton,b),(this._disabled||a._zoom===a.getMaxZoom())&&c.DomUtil.addClass(this._zoomInButton,b)}}),c.Map.mergeOptions({zoomControl:!0}),c.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new c.Control.Zoom,this.addControl(this.zoomControl))}),c.control.zoom=function(a){return new c.Control.Zoom(a)},c.Control.Attribution=c.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){c.setOptions(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=c.DomUtil.create("div","leaflet-control-attribution"),c.DomEvent&&c.DomEvent.disableClickPropagation(this._container);for(var b in a._layers)a._layers[b].getAttribution&&this.addAttribution(a._layers[b].getAttribution());return this._update(),this._container},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var b in this._attributions)this._attributions[b]&&a.push(b);var c=[];this.options.prefix&&c.push(this.options.prefix),a.length&&c.push(a.join(", ")),this._container.innerHTML=c.join(" | ")}}}),c.Map.mergeOptions({attributionControl:!0}),c.Map.addInitHook(function(){this.options.attributionControl&&(new c.Control.Attribution).addTo(this)}),c.control.attribution=function(a){return new c.Control.Attribution(a)},c.Control.Scale=c.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var b=c.DomUtil.create("div","leaflet-control-scale"),d=this.options;return this._addScales(d,"leaflet-control-scale-line",b),a.on(d.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),b},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,d){a.metric&&(this._mScale=c.DomUtil.create("div",b,d)),a.imperial&&(this._iScale=c.DomUtil.create("div",b,d))},_update:function(){var a=this._map,b=a.getSize().y/2,c=a.distance(a.containerPointToLatLng([0,b]),a.containerPointToLatLng([this.options.maxWidth,b]));this._updateScales(c)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var b=this._getRoundNum(a),c=b<1e3?b+" m":b/1e3+" km";this._updateScale(this._mScale,c,b/a)},_updateImperial:function(a){var b,c,d,e=3.2808399*a;e>5280?(b=e/5280,c=this._getRoundNum(b),this._updateScale(this._iScale,c+" mi",c/b)):(d=this._getRoundNum(e),this._updateScale(this._iScale,d+" ft",d/e))},_updateScale:function(a,b,c){a.style.width=Math.round(this.options.maxWidth*c)+"px",a.innerHTML=b},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1),c=a/b;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,b*c}}),c.control.scale=function(a){return new c.Control.Scale(a)},c.Control.Layers=c.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,b,c,d){return c<d?-1:d<c?1:0}},initialize:function(a,b,d){c.setOptions(this,d),this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var e in a)this._addLayer(a[e],e);for(e in b)this._addLayer(b[e],e,!0)},onAdd:function(a){return this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._map?this._update():this},addOverlay:function(a,b){return this._addLayer(a,b,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var b=this._getLayer(c.stamp(a));return b&&this._layers.splice(this._layers.indexOf(b),1),this._map?this._update():this},expand:function(){c.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._form.clientHeight?(c.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=a+"px"):c.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return c.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",b=this._container=c.DomUtil.create("div",a),d=this.options.collapsed;b.setAttribute("aria-haspopup",!0),c.DomEvent.disableClickPropagation(b),c.Browser.touch||c.DomEvent.disableScrollPropagation(b);var e=this._form=c.DomUtil.create("form",a+"-list");d&&(this._map.on("click",this.collapse,this),c.Browser.android||c.DomEvent.on(b,{mouseenter:this.expand,mouseleave:this.collapse},this));var f=this._layersLink=c.DomUtil.create("a",a+"-toggle",b);f.href="#",f.title="Layers",c.Browser.touch?c.DomEvent.on(f,"click",c.DomEvent.stop).on(f,"click",this.expand,this):c.DomEvent.on(f,"focus",this.expand,this),c.DomEvent.on(e,"click",function(){setTimeout(c.bind(this._onInputClick,this),0)},this),d||this.expand(),this._baseLayersList=c.DomUtil.create("div",a+"-base",e),this._separator=c.DomUtil.create("div",a+"-separator",e),this._overlaysList=c.DomUtil.create("div",a+"-overlays",e),b.appendChild(e)},_getLayer:function(a){for(var b=0;b<this._layers.length;b++)if(this._layers[b]&&c.stamp(this._layers[b].layer)===a)return this._layers[b]},_addLayer:function(a,b,d){a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:b,overlay:d}),this.options.sortLayers&&this._layers.sort(c.bind(function(a,b){return this.options.sortFunction(a.layer,b.layer,a.name,b.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;c.DomUtil.empty(this._baseLayersList),c.DomUtil.empty(this._overlaysList);var a,b,d,e,f=0;for(d=0;d<this._layers.length;d++)e=this._layers[d],this._addItem(e),b=b||e.overlay,a=a||!e.overlay,f+=e.overlay?0:1;return this.options.hideSingleBase&&(a=a&&f>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=b&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var b=this._getLayer(c.stamp(a.target)),d=b.overlay?"add"===a.type?"overlayadd":"overlayremove":"add"===a.type?"baselayerchange":null;d&&this._map.fire(d,b)},_createRadioElement:function(a,c){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(c?' checked="checked"':"")+"/>",e=b.createElement("div");return e.innerHTML=d,e.firstChild},_addItem:function(a){var d,e=b.createElement("label"),f=this._map.hasLayer(a.layer);a.overlay?(d=b.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=f):d=this._createRadioElement("leaflet-base-layers",f),d.layerId=c.stamp(a.layer),c.DomEvent.on(d,"click",this._onInputClick,this);var g=b.createElement("span");g.innerHTML=" "+a.name;var h=b.createElement("div");return e.appendChild(h),h.appendChild(d),h.appendChild(g),(a.overlay?this._overlaysList:this._baseLayersList).appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){var a,b,c,d=this._form.getElementsByTagName("input"),e=[],f=[];this._handlingClick=!0;for(var g=d.length-1;g>=0;g--)a=d[g],b=this._getLayer(a.layerId).layer,c=this._map.hasLayer(b),a.checked&&!c?e.push(b):!a.checked&&c&&f.push(b);for(g=0;g<f.length;g++)this._map.removeLayer(f[g]);for(g=0;g<e.length;g++)this._map.addLayer(e[g]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var a,b,c=this._form.getElementsByTagName("input"),d=this._map.getZoom(),e=c.length-1;e>=0;e--)a=c[e],b=this._getLayer(a.layerId).layer,a.disabled=void 0!==b.options.minZoom&&d<b.options.minZoom||void 0!==b.options.maxZoom&&d>b.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),c.control.layers=function(a,b,d){return new c.Control.Layers(a,b,d)}}(window,document),function(a,b){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(a){L.Util.setOptions(this,a),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var b=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,b?this._withAnimation:this._noAnimation),this._markerCluster=b?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(a){if(a instanceof L.LayerGroup)return this.addLayers([a]);if(!a.getLatLng)return this._nonPointGroup.addLayer(a),this.fire("layeradd",{layer:a}),this;if(!this._map)return this._needsClustering.push(a),this.fire("layeradd",{layer:a}),this;if(this.hasLayer(a))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(a,this._maxZoom),this.fire("layeradd",{layer:a}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var b=a,c=this._zoom;if(a.__parent)for(;b.__parent._zoom>=c;)b=b.__parent;return this._currentShownBounds.contains(b.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(a,b):this._animationAddLayerNonAnimated(a,b)),this},removeLayer:function(a){return a instanceof L.LayerGroup?this.removeLayers([a]):a.getLatLng?this._map?a.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(a)),this._removeLayer(a,!0),this.fire("layerremove",{layer:a}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),a.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(a)&&(this._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,a)&&this.hasLayer(a)&&this._needsRemoving.push({layer:a,latlng:a._latlng}),this.fire("layerremove",{layer:a}),this):(this._nonPointGroup.removeLayer(a),this.fire("layerremove",{layer:a}),this)},addLayers:function(a,b){if(!L.Util.isArray(a))return this.addLayer(a);var c,d=this._featureGroup,e=this._nonPointGroup,f=this.options.chunkedLoading,g=this.options.chunkInterval,h=this.options.chunkProgress,i=a.length,j=0,k=!0;if(this._map){var l=(new Date).getTime(),m=L.bind(function(){for(var n=(new Date).getTime();j<i;j++){if(f&&j%200==0){if((new Date).getTime()-n>g)break}if((c=a[j])instanceof L.LayerGroup)k&&(a=a.slice(),k=!1),this._extractNonGroupLayers(c,a),i=a.length;else if(c.getLatLng){if(!this.hasLayer(c)&&(this._addLayer(c,this._maxZoom),b||this.fire("layeradd",{layer:c}),c.__parent&&2===c.__parent.getChildCount())){var o=c.__parent.getAllChildMarkers(),p=o[0]===c?o[1]:o[0];d.removeLayer(p)}}else e.addLayer(c),b||this.fire("layeradd",{layer:c})}h&&h(j,i,(new Date).getTime()-l),j===i?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(m,this.options.chunkDelay)},this);m()}else for(var n=this._needsClustering;j<i;j++)c=a[j],c instanceof L.LayerGroup?(k&&(a=a.slice(),k=!1),this._extractNonGroupLayers(c,a),i=a.length):c.getLatLng?this.hasLayer(c)||n.push(c):e.addLayer(c);return this},removeLayers:function(a){var b,c,d=a.length,e=this._featureGroup,f=this._nonPointGroup,g=!0;if(!this._map){for(b=0;b<d;b++)c=a[b],c instanceof L.LayerGroup?(g&&(a=a.slice(),g=!1),this._extractNonGroupLayers(c,a),d=a.length):(this._arraySplice(this._needsClustering,c),f.removeLayer(c),this.hasLayer(c)&&this._needsRemoving.push({layer:c,latlng:c._latlng}),this.fire("layerremove",{layer:c}));return this}if(this._unspiderfy){this._unspiderfy();var h=a.slice(),i=d;for(b=0;b<i;b++)c=h[b],c instanceof L.LayerGroup?(this._extractNonGroupLayers(c,h),i=h.length):this._unspiderfyLayer(c)}for(b=0;b<d;b++)c=a[b],c instanceof L.LayerGroup?(g&&(a=a.slice(),g=!1),this._extractNonGroupLayers(c,a),d=a.length):c.__parent?(this._removeLayer(c,!0,!0),this.fire("layerremove",{layer:c}),e.hasLayer(c)&&(e.removeLayer(c),c.clusterShow&&c.clusterShow())):(f.removeLayer(c),this.fire("layerremove",{layer:c}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(a){a.off(this._childMarkerEventHandlers,this),delete a.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var a=new L.LatLngBounds;this._topClusterLevel&&a.extend(this._topClusterLevel._bounds);for(var b=this._needsClustering.length-1;b>=0;b--)a.extend(this._needsClustering[b].getLatLng());return a.extend(this._nonPointGroup.getBounds()),a},eachLayer:function(a,b){var c,d,e,f=this._needsClustering.slice(),g=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(f),d=f.length-1;d>=0;d--){for(c=!0,e=g.length-1;e>=0;e--)if(g[e].layer===f[d]){c=!1;break}c&&a.call(b,f[d])}this._nonPointGroup.eachLayer(a,b)},getLayers:function(){var a=[];return this.eachLayer(function(b){a.push(b)}),a},getLayer:function(a){var b=null;return a=parseInt(a,10),this.eachLayer(function(c){L.stamp(c)===a&&(b=c)}),b},hasLayer:function(a){if(!a)return!1;var b,c=this._needsClustering;for(b=c.length-1;b>=0;b--)if(c[b]===a)return!0;for(c=this._needsRemoving,b=c.length-1;b>=0;b--)if(c[b].layer===a)return!1;return!(!a.__parent||a.__parent._group!==this)||this._nonPointGroup.hasLayer(a)},zoomToShowLayer:function(a,b){"function"!=typeof b&&(b=function(){});var c=function(){!a._icon&&!a.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",c,this),this.off("animationend",c,this),a._icon?b():a.__parent._icon&&(this.once("spiderfied",b,this),a.__parent.spiderfy()))};a._icon&&this._map.getBounds().contains(a.getLatLng())?b():a.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",c,this),this._map.panTo(a.getLatLng())):(this._map.on("moveend",c,this),this.on("animationend",c,this),a.__parent.zoomToBounds())},onAdd:function(a){this._map=a;var b,c,d;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(a),this._nonPointGroup.addTo(a),this._gridClusters||this._generateInitialClusters(),this._maxLat=a.options.crs.projection.MAX_LATITUDE,b=0,c=this._needsRemoving.length;b<c;b++)d=this._needsRemoving[b],d.newlatlng=d.layer._latlng,d.layer._latlng=d.latlng;for(b=0,c=this._needsRemoving.length;b<c;b++)d=this._needsRemoving[b],this._removeLayer(d.layer,!0),d.layer._latlng=d.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),c=this._needsClustering,this._needsClustering=[],this.addLayers(c,!0)},onRemove:function(a){a.off("zoomend",this._zoomEnd,this),a.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(a){for(var b=a;b&&!b._icon;)b=b.__parent;return b||null},_arraySplice:function(a,b){for(var c=a.length-1;c>=0;c--)if(a[c]===b)return a.splice(c,1),!0},_removeFromGridUnclustered:function(a,b){for(var c=this._map,d=this._gridUnclustered,e=this._map.getMinZoom();b>=e&&d[b].removeObject(a,c.project(a.getLatLng(),b));b--);},_childMarkerDragStart:function(a){a.target.__dragStart=a.target._latlng},_childMarkerMoved:function(a){if(!this._ignoreMove&&!a.target.__dragStart){var b=a.target._popup&&a.target._popup.isOpen();this._moveChild(a.target,a.oldLatLng,a.latlng),b&&a.target.openPopup()}},_moveChild:function(a,b,c){a._latlng=b,this.removeLayer(a),a._latlng=c,this.addLayer(a)},_childMarkerDragEnd:function(a){a.target.__dragStart&&this._moveChild(a.target,a.target.__dragStart,a.target._latlng),delete a.target.__dragStart},_removeLayer:function(a,b,c){var d=this._gridClusters,e=this._gridUnclustered,f=this._featureGroup,g=this._map,h=this._map.getMinZoom();b&&this._removeFromGridUnclustered(a,this._maxZoom);var i,j=a.__parent,k=j._markers;for(this._arraySplice(k,a);j&&(j._childCount--,j._boundsNeedUpdate=!0,!(j._zoom<h));)b&&j._childCount<=1?(i=j._markers[0]===a?j._markers[1]:j._markers[0],d[j._zoom].removeObject(j,g.project(j._cLatLng,j._zoom)),e[j._zoom].addObject(i,g.project(i.getLatLng(),j._zoom)),this._arraySplice(j.__parent._childClusters,j),j.__parent._markers.push(i),i.__parent=j.__parent,j._icon&&(f.removeLayer(j),c||f.addLayer(i))):j._iconNeedsUpdate=!0,j=j.__parent;delete a.__parent},_isOrIsParent:function(a,b){for(;b;){if(a===b)return!0;b=b.parentNode}return!1},fire:function(a,b,c){if(b&&b.layer instanceof L.MarkerCluster){if(b.originalEvent&&this._isOrIsParent(b.layer._icon,b.originalEvent.relatedTarget))return;a="cluster"+a}L.FeatureGroup.prototype.fire.call(this,a,b,c)},listens:function(a,b){return L.FeatureGroup.prototype.listens.call(this,a,b)||L.FeatureGroup.prototype.listens.call(this,"cluster"+a,b)},_defaultIconCreateFunction:function(a){var b=a.getChildCount(),c=" marker-cluster-";return c+=b<10?"small":b<100?"medium":"large",new L.DivIcon({html:"<div><span>"+b+"</span></div>",className:"marker-cluster"+c,iconSize:new L.Point(40,40)})},_bindEvents:function(){var a=this._map,b=this.options.spiderfyOnMaxZoom,c=this.options.showCoverageOnHover,d=this.options.zoomToBoundsOnClick;(b||d)&&this.on("clusterclick",this._zoomOrSpiderfy,this),c&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),a.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(a){for(var b=a.layer,c=b;1===c._childClusters.length;)c=c._childClusters[0];c._zoom===this._maxZoom&&c._childCount===b._childCount&&this.options.spiderfyOnMaxZoom?b.spiderfy():this.options.zoomToBoundsOnClick&&b.zoomToBounds(),a.originalEvent&&13===a.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(a){var b=this._map;this._inZoomAnimation||(this._shownPolygon&&b.removeLayer(this._shownPolygon),a.layer.getChildCount()>2&&a.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(a.layer.getConvexHull(),this.options.polygonOptions),b.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var a=this.options.spiderfyOnMaxZoom,b=this.options.showCoverageOnHover,c=this.options.zoomToBoundsOnClick,d=this._map;(a||c)&&this.off("clusterclick",this._zoomOrSpiderfy,this),b&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),d.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var a=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._map.getMinZoom(),this._zoom,a),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),a),this._currentShownBounds=a}},_generateInitialClusters:function(){var a=this._map.getMaxZoom(),b=this._map.getMinZoom(),c=this.options.maxClusterRadius,d=c;"function"!=typeof c&&(d=function(){return c}),this.options.disableClusteringAtZoom&&(a=this.options.disableClusteringAtZoom-1),this._maxZoom=a,this._gridClusters={},this._gridUnclustered={};for(var e=a;e>=b;e--)this._gridClusters[e]=new L.DistanceGrid(d(e)),this._gridUnclustered[e]=new L.DistanceGrid(d(e));this._topClusterLevel=new this._markerCluster(this,b-1)},_addLayer:function(a,b){var c,d,e=this._gridClusters,f=this._gridUnclustered,g=this._map.getMinZoom();for(this.options.singleMarkerMode&&this._overrideMarkerIcon(a),a.on(this._childMarkerEventHandlers,this);b>=g;b--){c=this._map.project(a.getLatLng(),b);var h=e[b].getNearObject(c);if(h)return h._addChild(a),void(a.__parent=h);if(h=f[b].getNearObject(c)){var i=h.__parent;i&&this._removeLayer(h,!1);var j=new this._markerCluster(this,b,h,a);e[b].addObject(j,this._map.project(j._cLatLng,b)),h.__parent=j,a.__parent=j;var k=j;for(d=b-1;d>i._zoom;d--)k=new this._markerCluster(this,d,k),e[d].addObject(k,this._map.project(h.getLatLng(),d));return i._addChild(k),void this._removeFromGridUnclustered(h,b)}f[b].addObject(a,c)}this._topClusterLevel._addChild(a),a.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(a){a instanceof L.MarkerCluster&&a._iconNeedsUpdate&&a._updateIcon()})},_enqueue:function(a){this._queue.push(a),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var a=0;a<this._queue.length;a++)this._queue[a].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var a=Math.round(this._map._zoom)
;this._processQueue(),this._zoom<a&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._map.getMinZoom(),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,a)):this._zoom>a?(this._animationStart(),this._animationZoomOut(this._zoom,a)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(a){var b=this._maxLat;return void 0!==b&&(a.getNorth()>=b&&(a._northEast.lat=1/0),a.getSouth()<=-b&&(a._southWest.lat=-(1/0))),a},_animationAddLayerNonAnimated:function(a,b){if(b===a)this._featureGroup.addLayer(a);else if(2===b._childCount){b._addToMap();var c=b.getAllChildMarkers();this._featureGroup.removeLayer(c[0]),this._featureGroup.removeLayer(c[1])}else b._updateIcon()},_extractNonGroupLayers:function(a,b){var c,d=a.getLayers(),e=0;for(b=b||[];e<d.length;e++)c=d[e],c instanceof L.LayerGroup?this._extractNonGroupLayers(c,b):b.push(c);return b},_overrideMarkerIcon:function(a){return a.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[a]}})}}),L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-(1/0),-(1/0)),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(a,b){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._map.getMinZoom(),a),this._topClusterLevel._recursivelyAddChildrenToMap(null,b,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(a,b){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._map.getMinZoom(),a),this._topClusterLevel._recursivelyAddChildrenToMap(null,b,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(a,b){this._animationAddLayerNonAnimated(a,b)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(a,b){var c,d=this._getExpandedVisibleBounds(),e=this._featureGroup,f=this._map.getMinZoom();this._ignoreMove=!0,this._topClusterLevel._recursively(d,a,f,function(f){var g,h=f._latlng,i=f._markers;for(d.contains(h)||(h=null),f._isSingleParent()&&a+1===b?(e.removeLayer(f),f._recursivelyAddChildrenToMap(null,b,d)):(f.clusterHide(),f._recursivelyAddChildrenToMap(h,b,d)),c=i.length-1;c>=0;c--)g=i[c],d.contains(g._latlng)||e.removeLayer(g)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(d,b),e.eachLayer(function(a){a instanceof L.MarkerCluster||!a._icon||a.clusterShow()}),this._topClusterLevel._recursively(d,a,b,function(a){a._recursivelyRestoreChildPositions(b)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(d,a,f,function(a){e.removeLayer(a),a.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(a,b){this._animationZoomOutSingle(this._topClusterLevel,a-1,b),this._topClusterLevel._recursivelyAddChildrenToMap(null,b,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._map.getMinZoom(),a,this._getExpandedVisibleBounds())},_animationAddLayer:function(a,b){var c=this,d=this._featureGroup;d.addLayer(a),b!==a&&(b._childCount>2?(b._updateIcon(),this._forceLayout(),this._animationStart(),a._setPos(this._map.latLngToLayerPoint(b.getLatLng())),a.clusterHide(),this._enqueue(function(){d.removeLayer(a),a.clusterShow(),c._animationEnd()})):(this._forceLayout(),c._animationStart(),c._animationZoomOutSingle(b,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(a,b,c){var d=this._getExpandedVisibleBounds(),e=this._map.getMinZoom();a._recursivelyAnimateChildrenInAndAddSelfToMap(d,e,b+1,c);var f=this;this._forceLayout(),a._recursivelyBecomeVisible(d,c),this._enqueue(function(){if(1===a._childCount){var g=a._markers[0];this._ignoreMove=!0,g.setLatLng(g.getLatLng()),this._ignoreMove=!1,g.clusterShow&&g.clusterShow()}else a._recursively(d,c,e,function(a){a._recursivelyRemoveChildrenFromMap(d,e,b+1)});f._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(b.body.offsetWidth)}}),L.markerClusterGroup=function(a){return new L.MarkerClusterGroup(a)},L.MarkerCluster=L.Marker.extend({initialize:function(a,b,c,d){L.Marker.prototype.initialize.call(this,c?c._cLatLng||c.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=a,this._zoom=b,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,c&&this._addChild(c),d&&this._addChild(d)},getAllChildMarkers:function(a){a=a||[];for(var b=this._childClusters.length-1;b>=0;b--)this._childClusters[b].getAllChildMarkers(a);for(var c=this._markers.length-1;c>=0;c--)a.push(this._markers[c]);return a},getChildCount:function(){return this._childCount},zoomToBounds:function(){for(var a,b=this._childClusters.slice(),c=this._group._map,d=c.getBoundsZoom(this._bounds),e=this._zoom+1,f=c.getZoom();b.length>0&&d>e;){e++;var g=[];for(a=0;a<b.length;a++)g=g.concat(b[a]._childClusters);b=g}d>e?this._group._map.setView(this._latlng,e):d<=f?this._group._map.setView(this._latlng,f+1):this._group._map.fitBounds(this._bounds)},getBounds:function(){var a=new L.LatLngBounds;return a.extend(this._bounds),a},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(a,b){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(a),a instanceof L.MarkerCluster?(b||(this._childClusters.push(a),a.__parent=this),this._childCount+=a._childCount):(b||this._markers.push(a),this._childCount++),this.__parent&&this.__parent._addChild(a,!0)},_setClusterCenter:function(a){this._cLatLng||(this._cLatLng=a._cLatLng||a._latlng)},_resetBounds:function(){var a=this._bounds;a._southWest&&(a._southWest.lat=1/0,a._southWest.lng=1/0),a._northEast&&(a._northEast.lat=-(1/0),a._northEast.lng=-(1/0))},_recalculateBounds:function(){var a,b,c,d,e=this._markers,f=this._childClusters,g=0,h=0,i=this._childCount;if(0!==i){for(this._resetBounds(),a=0;a<e.length;a++)c=e[a]._latlng,this._bounds.extend(c),g+=c.lat,h+=c.lng;for(a=0;a<f.length;a++)b=f[a],b._boundsNeedUpdate&&b._recalculateBounds(),this._bounds.extend(b._bounds),c=b._wLatLng,d=b._childCount,g+=c.lat*d,h+=c.lng*d;this._latlng=this._wLatLng=new L.LatLng(g/i,h/i),this._boundsNeedUpdate=!1}},_addToMap:function(a){a&&(this._backupLatlng=this._latlng,this.setLatLng(a)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(a,b,c){this._recursively(a,this._group._map.getMinZoom(),c-1,function(a){var c,d,e=a._markers;for(c=e.length-1;c>=0;c--)d=e[c],d._icon&&(d._setPos(b),d.clusterHide())},function(a){var c,d,e=a._childClusters;for(c=e.length-1;c>=0;c--)d=e[c],d._icon&&(d._setPos(b),d.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(a,b,c,d){this._recursively(a,d,b,function(e){e._recursivelyAnimateChildrenIn(a,e._group._map.latLngToLayerPoint(e.getLatLng()).round(),c),e._isSingleParent()&&c-1===d?(e.clusterShow(),e._recursivelyRemoveChildrenFromMap(a,b,c)):e.clusterHide(),e._addToMap()})},_recursivelyBecomeVisible:function(a,b){this._recursively(a,this._group._map.getMinZoom(),b,null,function(a){a.clusterShow()})},_recursivelyAddChildrenToMap:function(a,b,c){this._recursively(c,this._group._map.getMinZoom()-1,b,function(d){if(b!==d._zoom)for(var e=d._markers.length-1;e>=0;e--){var f=d._markers[e];c.contains(f._latlng)&&(a&&(f._backupLatlng=f.getLatLng(),f.setLatLng(a),f.clusterHide&&f.clusterHide()),d._group._featureGroup.addLayer(f))}},function(b){b._addToMap(a)})},_recursivelyRestoreChildPositions:function(a){for(var b=this._markers.length-1;b>=0;b--){var c=this._markers[b];c._backupLatlng&&(c.setLatLng(c._backupLatlng),delete c._backupLatlng)}if(a-1===this._zoom)for(var d=this._childClusters.length-1;d>=0;d--)this._childClusters[d]._restorePosition();else for(var e=this._childClusters.length-1;e>=0;e--)this._childClusters[e]._recursivelyRestoreChildPositions(a)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(a,b,c,d){var e,f;this._recursively(a,b-1,c-1,function(a){for(f=a._markers.length-1;f>=0;f--)e=a._markers[f],d&&d.contains(e._latlng)||(a._group._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow())},function(a){for(f=a._childClusters.length-1;f>=0;f--)e=a._childClusters[f],d&&d.contains(e._latlng)||(a._group._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow())})},_recursively:function(a,b,c,d,e){var f,g,h=this._childClusters,i=this._zoom;if(b<=i&&(d&&d(this),e&&i===c&&e(this)),i<b||i<c)for(f=h.length-1;f>=0;f--)g=h[f],a.intersects(g._bounds)&&g._recursively(a,b,c,d,e)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}}),L.Marker.include({clusterHide:function(){return this.options.opacityWhenUnclustered=this.options.opacity||1,this.setOpacity(0)},clusterShow:function(){var a=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);return delete this.options.opacityWhenUnclustered,a}}),L.DistanceGrid=function(a){this._cellSize=a,this._sqCellSize=a*a,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(a,b){var c=this._getCoord(b.x),d=this._getCoord(b.y),e=this._grid,f=e[d]=e[d]||{},g=f[c]=f[c]||[],h=L.Util.stamp(a);this._objectPoint[h]=b,g.push(a)},updateObject:function(a,b){this.removeObject(a),this.addObject(a,b)},removeObject:function(a,b){var c,d,e=this._getCoord(b.x),f=this._getCoord(b.y),g=this._grid,h=g[f]=g[f]||{},i=h[e]=h[e]||[];for(delete this._objectPoint[L.Util.stamp(a)],c=0,d=i.length;c<d;c++)if(i[c]===a)return i.splice(c,1),1===d&&delete h[e],!0},eachObject:function(a,b){var c,d,e,f,g,h,i=this._grid;for(c in i){g=i[c];for(d in g)for(h=g[d],e=0,f=h.length;e<f;e++)a.call(b,h[e])&&(e--,f--)}},getNearObject:function(a){var b,c,d,e,f,g,h,i,j=this._getCoord(a.x),k=this._getCoord(a.y),l=this._objectPoint,m=this._sqCellSize,n=null;for(b=k-1;b<=k+1;b++)if(e=this._grid[b])for(c=j-1;c<=j+1;c++)if(f=e[c])for(d=0,g=f.length;d<g;d++)h=f[d],(i=this._sqDist(l[L.Util.stamp(h)],a))<m&&(m=i,n=h);return n},_getCoord:function(a){return Math.floor(a/this._cellSize)},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d}},function(){L.QuickHull={getDistant:function(a,b){var c=b[1].lat-b[0].lat;return(b[0].lng-b[1].lng)*(a.lat-b[0].lat)+c*(a.lng-b[0].lng)},findMostDistantPointFromBaseLine:function(a,b){var c,d,e,f=0,g=null,h=[];for(c=b.length-1;c>=0;c--)d=b[c],(e=this.getDistant(d,a))>0&&(h.push(d),e>f&&(f=e,g=d));return{maxPoint:g,newPoints:h}},buildConvexHull:function(a,b){var c=[],d=this.findMostDistantPointFromBaseLine(a,b);return d.maxPoint?(c=c.concat(this.buildConvexHull([a[0],d.maxPoint],d.newPoints)),c=c.concat(this.buildConvexHull([d.maxPoint,a[1]],d.newPoints))):[a[0]]},getConvexHull:function(a){var b,c=!1,d=!1,e=!1,f=!1,g=null,h=null,i=null,j=null,k=null,l=null;for(b=a.length-1;b>=0;b--){var m=a[b];(c===!1||m.lat>c)&&(g=m,c=m.lat),(d===!1||m.lat<d)&&(h=m,d=m.lat),(e===!1||m.lng>e)&&(i=m,e=m.lng),(f===!1||m.lng<f)&&(j=m,f=m.lng)}return d!==c?(l=h,k=g):(l=j,k=i),[].concat(this.buildConvexHull([l,k],a),this.buildConvexHull([k,l],a))}}}(),L.MarkerCluster.include({getConvexHull:function(){var a,b,c=this.getAllChildMarkers(),d=[];for(b=c.length-1;b>=0;b--)a=c[b].getLatLng(),d.push(a);return L.QuickHull.getConvexHull(d)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var a,b=this.getAllChildMarkers(),c=this._group,d=c._map,e=d.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,b.length>=this._circleSpiralSwitchover?a=this._generatePointsSpiral(b.length,e):(e.y+=10,a=this._generatePointsCircle(b.length,e)),this._animationSpiderfy(b,a)}},unspiderfy:function(a){this._group._inZoomAnimation||(this._animationUnspiderfy(a),this._group._spiderfied=null)},_generatePointsCircle:function(a,b){var c,d,e=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+a),f=e/this._2PI,g=this._2PI/a,h=[];for(h.length=a,c=a-1;c>=0;c--)d=this._circleStartAngle+c*g,h[c]=new L.Point(b.x+f*Math.cos(d),b.y+f*Math.sin(d))._round();return h},_generatePointsSpiral:function(a,b){var c,d=this._group.options.spiderfyDistanceMultiplier,e=d*this._spiralLengthStart,f=d*this._spiralFootSeparation,g=d*this._spiralLengthFactor*this._2PI,h=0,i=[];for(i.length=a,c=a-1;c>=0;c--)h+=f/e+5e-4*c,i[c]=new L.Point(b.x+e*Math.cos(h),b.y+e*Math.sin(h))._round(),e+=g/h;return i},_noanimationUnspiderfy:function(){var a,b,c=this._group,d=c._map,e=c._featureGroup,f=this.getAllChildMarkers();for(c._ignoreMove=!0,this.setOpacity(1),b=f.length-1;b>=0;b--)a=f[b],e.removeLayer(a),a._preSpiderfyLatlng&&(a.setLatLng(a._preSpiderfyLatlng),delete a._preSpiderfyLatlng),a.setZIndexOffset&&a.setZIndexOffset(0),a._spiderLeg&&(d.removeLayer(a._spiderLeg),delete a._spiderLeg);c.fire("unspiderfied",{cluster:this,markers:f}),c._ignoreMove=!1,c._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(a,b){var c,d,e,f,g=this._group,h=g._map,i=g._featureGroup,j=this._group.options.spiderLegPolylineOptions;for(g._ignoreMove=!0,c=0;c<a.length;c++)f=h.layerPointToLatLng(b[c]),d=a[c],e=new L.Polyline([this._latlng,f],j),h.addLayer(e),d._spiderLeg=e,d._preSpiderfyLatlng=d._latlng,d.setLatLng(f),d.setZIndexOffset&&d.setZIndexOffset(1e6),i.addLayer(d);this.setOpacity(.3),g._ignoreMove=!1,g.fire("spiderfied",{cluster:this,markers:a})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(a,b){var c,d,e,f,g,h,i=this,j=this._group,k=j._map,l=j._featureGroup,m=this._latlng,n=k.latLngToLayerPoint(m),o=L.Path.SVG,p=L.extend({},this._group.options.spiderLegPolylineOptions),q=p.opacity;for(void 0===q&&(q=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),o?(p.opacity=0,p.className=(p.className||"")+" leaflet-cluster-spider-leg"):p.opacity=q,j._ignoreMove=!0,c=0;c<a.length;c++)d=a[c],h=k.layerPointToLatLng(b[c]),e=new L.Polyline([m,h],p),k.addLayer(e),d._spiderLeg=e,o&&(f=e._path,g=f.getTotalLength()+.1,f.style.strokeDasharray=g,f.style.strokeDashoffset=g),d.setZIndexOffset&&d.setZIndexOffset(1e6),d.clusterHide&&d.clusterHide(),l.addLayer(d),d._setPos&&d._setPos(n);for(j._forceLayout(),j._animationStart(),c=a.length-1;c>=0;c--)h=k.layerPointToLatLng(b[c]),d=a[c],d._preSpiderfyLatlng=d._latlng,d.setLatLng(h),d.clusterShow&&d.clusterShow(),o&&(e=d._spiderLeg,f=e._path,f.style.strokeDashoffset=0,e.setStyle({opacity:q}));this.setOpacity(.3),j._ignoreMove=!1,setTimeout(function(){j._animationEnd(),j.fire("spiderfied",{cluster:i,markers:a})},200)},_animationUnspiderfy:function(a){var b,c,d,e,f,g,h=this,i=this._group,j=i._map,k=i._featureGroup,l=a?j._latLngToNewLayerPoint(this._latlng,a.zoom,a.center):j.latLngToLayerPoint(this._latlng),m=this.getAllChildMarkers(),n=L.Path.SVG;for(i._ignoreMove=!0,i._animationStart(),this.setOpacity(1),c=m.length-1;c>=0;c--)b=m[c],b._preSpiderfyLatlng&&(b.closePopup(),b.setLatLng(b._preSpiderfyLatlng),delete b._preSpiderfyLatlng,g=!0,b._setPos&&(b._setPos(l),g=!1),b.clusterHide&&(b.clusterHide(),g=!1),g&&k.removeLayer(b),n&&(d=b._spiderLeg,e=d._path,f=e.getTotalLength()+.1,e.style.strokeDashoffset=f,d.setStyle({opacity:0})));i._ignoreMove=!1,setTimeout(function(){var a=0;for(c=m.length-1;c>=0;c--)b=m[c],b._spiderLeg&&a++;for(c=m.length-1;c>=0;c--)b=m[c],b._spiderLeg&&(b.clusterShow&&b.clusterShow(),b.setZIndexOffset&&b.setZIndexOffset(0),a>1&&k.removeLayer(b),j.removeLayer(b._spiderLeg),delete b._spiderLeg);i._animationEnd(),i.fire("unspiderfied",{cluster:h,markers:m})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(a){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(a))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(a){this._spiderfied&&this._spiderfied.unspiderfy(a)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(a){a._spiderLeg&&(this._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow(),a.setZIndexOffset&&a.setZIndexOffset(0),this._map.removeLayer(a._spiderLeg),delete a._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(a){return a?a instanceof L.MarkerClusterGroup?a=a._topClusterLevel.getAllChildMarkers():a instanceof L.LayerGroup?a=a._layers:a instanceof L.MarkerCluster?a=a.getAllChildMarkers():a instanceof L.Marker&&(a=[a]):a=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(a),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(a),this},_flagParentsIconsNeedUpdate:function(a){var b,c;for(b in a)for(c=a[b].__parent;c;)c._iconNeedsUpdate=!0,c=c.__parent},_refreshSingleMarkerModeMarkers:function(a){var b,c;for(b in a)c=a[b],this.hasLayer(c)&&c.setIcon(this._overrideMarkerIcon(c))}}),L.Marker.include({refreshIconOptions:function(a,b){var c=this.options.icon;return L.setOptions(c,a),this.setIcon(c),b&&this.__parent&&this.__parent._group.refreshClusters(this),this}})}(window,document),L.Control.ZoomFS=L.Control.Zoom.extend({includes:L.Mixin.Events,onAdd:function(a){var b="leaflet-control-zoom",c="leaflet-bar-part",d=L.DomUtil.create("div",b+" leaflet-bar");return this._map=a,this._isFullscreen=!1,this._zoomFullScreenButton=this._createButton("","Toggle Full Screen","leaflet-control-fullscreen "+c+" "+c+"-top",d,this.fullscreen,this),this._zoomInButton=this._createButton("","Zoom in",b+"-in "+c+" ",d,this._zoomIn,this),this._zoomOutButton=this._createButton("","Zoom out",b+"-out "+c+" "+c+"-bottom",d,this._zoomOut,this),a.on("zoomend zoomlevelschange",this._updateDisabled,this),d},fullscreen:function(){this._isFullscreen?this._exitFullScreen():this._enterFullScreen(),this._map&&this._map.invalidateSize()},_enterFullScreen:function(){var a=this._map._container;this._oldWidth=a.style.width,this._oldHeight=a.style.height,a.style.width="100%",a.style.height="100%",L.DomUtil.addClass(a,"leaflet-fullscreen"),this._isFullscreen=!0,L.DomEvent.addListener(document,"keyup",this._onKeyUp,this),this._map.fire("enterFullscreen")},_exitFullScreen:function(){var a=this._map._container;L.DomUtil.removeClass(a,"leaflet-fullscreen"),this._isFullscreen=!1,a.style.width=this._oldWidth,a.style.height=this._oldHeight,L.DomEvent.removeListener(document,"keyup",this._onKeyUp),this._map.fire("exitFullscreen")},_onKeyUp:function(a){a||(a=window.event),27===a.keyCode&&this._isFullscreen===!0&&this._exitFullScreen()}}),function(){var a=Math.pow,b=Math.round,c=Math.LN10,d=Math.log,e=function(){var e=[];return function(f){return f=f||1,void 0===e[f]&&(e[f]=b(a(d(10*f)/c,.7)*CL.maps.minMarkerSize)),e[f]}}();CL.extend("maps",{clMapsUrl:window.maptileBaseUrl,map:void 0,minMarkerSize:CL.page.isMobile?25:16,isFrozen:!1,freezeMap:function(a){(a=a||this.map)&&(a.dragging.disable(),a.touchZoom.disable(),a.doubleClickZoom.disable(),a.scrollWheelZoom.disable(),a.boxZoom.disable(),a.keyboard.disable(),a.tap&&a.tap.disable(),this.isFrozen=!0,$("#map").addClass("map-frozen"))},thawMap:function(a){(a=a||this.map)&&(a.dragging.enable(),a.touchZoom.enable(),a.doubleClickZoom.enable(),a.scrollWheelZoom.enable(),a.boxZoom.enable(),a.keyboard.enable(),a.tap&&a.tap.enable(),this.isFrozen=!1,$("#map").removeClass("map-frozen"))},marker:{create:function(a,b,c){if(a=a&&Number(a),b=b&&Number(b),!isNaN(a)&&!isNaN(b)){c=c||{};var d=L.marker([a,b],c),e=c.pids;if(Array.isArray(e)&&e.length>0){var f=this.byID,g=this.containingPID,h={marker:d,banishedCount:0,unbanishedCount:0};e.forEach(function(a){CL.banish.isBanished(a)?h.banishedCount++:h.unbanishedCount++,g[a]=h}),f[e.join(",")]=h}return d}},byID:{},containingPID:{},updateIcon:function(a){var b;b="object"!=typeof a?this.containingPID[a]:this.containingPID[a.options.pids[0]];var c=b.marker,d=c.options;c.setIcon(CL.maps.makeIcon({visited:d.visited,unbanishedCount:b.unbanishedCount,totalCount:d.numposts,fav:CL.favorites.isFavorite(d.pids[0]),marker:c}))}},openPopup:void 0,makeIcon:function(a){a=a||{};var b=a.visited?"cl-marker-icon-visited":"cl-marker-icon",c=e(a.totalCount),d=a.fav?"fav":"",f=0===a.unbanishedCount?"banished":"";return L.divIcon({className:[b,f,d].join(" "),iconSize:[c,c],html:$("<div>").text(a.text).append($("<div></div>").css({width:c+"px",height:c+"px","line-height":c+"px"}).append($("<div></div>").addClass("pal").text(a.totalCount)).append($("<div></div>").addClass("pub").text(a.unbanishedCount))).html()})},createGeoButton:function(a){CL.browser.geolocation&&$("#geocodebutton").show().on("click",function(b){b.preventDefault(),navigator.geolocation.getCurrentPosition(function(b){a.setView(new L.LatLng(b.coords.latitude,b.coords.longitude),16)},function(a){var b=$("#error").text(a).addClass("alert");if(b.length){var c=window.setTimeout(function(){b.trigger("click")},4e3);b.animate({height:b.css("line-height")||"50px"},200).click(function(){window.clearTimeout(c),b.animate({height:"0"},200),b.html("").removeClass("alert")})}})})}})}();
/* {"sources":{"leaflet-concat.js":"21036231cb15749aae94aa3d7aab67fb"}} */